/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/google-closure-library/master/LICENSE
 *
 *  - zlib.js, the ultimate gzip/zlib javascript implementation (https://github.com/imaya/zlib.js)
 *    LICENSE: https://raw.github.com/imaya/zlib.js/master/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function m(a){throw a;}var n=void 0,q=!0,r=null,s=!1;function ba(){return function(){}}function ea(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var w,fa=this;function ga(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return a!==n}function y(a){return"array"==ia(a)}function la(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function D(a){return"number"==typeof a}function na(a){return"function"==ia(a)}function oa(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}function pa(a){return a[qa]||(a[qa]=++ra)}var qa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;
function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){a||m(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function va(a,b,c){va=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return va.apply(r,arguments)}
function wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};function F(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ja(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function G(a,b){function c(){}c.prototype=b.prototype;a.r=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ya(a,b,c){this.Fa=this.Ea=this.Da=0;3==arguments.length?(this.Da=Number(a),this.Ea=Number(b),this.Fa=Number(c)):a instanceof ya?(this.Da=Number(a.x()),this.Ea=Number(a.y()),this.Fa=Number(a.b())):(this.Da=Number(a[0]),this.Ea=Number(a[1]),this.Fa=Number(a[2]))}
ya.prototype={h:function(){return new ya(this.Da,this.Ea,this.Fa)},Jb:function(a){return this.Da*a.x()+this.Ea*a.y()+this.Fa*a.b()},Hd:function(a,b){return za(this,Aa(Ba(a,this),b))},length:function(){return Math.sqrt(this.Jb(this))},$b:function(a){return new ya(this.Ea*a.b()-this.Fa*a.y(),this.Fa*a.x()-this.Da*a.b(),this.Da*a.y()-this.Ea*a.x())},x:t("Da"),y:t("Ea"),b:t("Fa")};function Ca(a){var b=a.length();return new ya(a.Da/b,a.Ea/b,a.Fa/b)}
function Aa(a,b){return new ya(a.Da*b,a.Ea*b,a.Fa*b)}function Ba(a,b){return new ya(a.Da-b.x(),a.Ea-b.y(),a.Fa-b.b())}function za(a,b){return new ya(a.Da+b.x(),a.Ea+b.y(),a.Fa+b.b())}function Da(a){return new ya(-a.Da,-a.Ea,-a.Fa)};var L=L||{};L.Yi=q;L.Ga=function(a){eval("X.DEV === undefined")||window.console.time(a)};L.ta=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.Fg=0;this.Ui=function(){return this.Fg++}};function Ea(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Ga=window.wg;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&m(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var Ha=0,Ia=["ms","moz","webkit","o"],Ja=0;Ja<Ia.length&&!window.requestAnimationFrame;++Ja)window.requestAnimationFrame=window[Ia[Ja]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ia[Ja]+"CancelAnimationFrame"]||window[Ia[Ja]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ha)),d=window.setTimeout(function(){a(b+c)},c);Ha=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){a===n&&m(Error("Not enough arguments."));var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});F("$",Ga);F("Function.prototype.bind",Function.prototype.bind);
F("window.requestAnimationFrame",window.requestAnimationFrame);F("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ka=0;function La(){}w=La.prototype;w.key=0;w.dc=s;w.ud=s;w.ha=function(a,b,c,d,e,f){na(a)?this.Vf=q:a&&a.handleEvent&&na(a.handleEvent)?this.Vf=s:m(Error("Invalid listener argument"));this.Kb=a;this.ng=b;this.src=c;this.type=d;this.capture=!!e;this.Be=f;this.ud=s;this.key=++Ka;this.dc=s};w.handleEvent=function(a){return this.Vf?this.Kb.call(this.Be||this.src,a):this.Kb.handleEvent.call(this.Kb,a)};function Ma(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}var Na="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Na.length;f++)c=Na[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Pa(a){if(!Qa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));return a}var Ra=/&/g,Sa=/</g,Ta=/>/g,Ua=/\"/g,Qa=/[&<>\"]/;var Va,Xa,Ya,Za,$a,bb,cb;function db(){return fa.navigator?fa.navigator.userAgent:r}function eb(){return fa.navigator}Za=Ya=Xa=Va=s;var gb;if(gb=db()){var hb=eb();Va=0==gb.indexOf("Opera");Xa=!Va&&-1!=gb.indexOf("MSIE");Ya=!Va&&-1!=gb.indexOf("WebKit");Za=!Va&&!Ya&&"Gecko"==hb.product}var ib=Va,M=Xa,jb=Za,kb=Ya,lb,mb=eb();lb=mb&&mb.platform||"";$a=-1!=lb.indexOf("Mac");bb=-1!=lb.indexOf("Win");cb=-1!=lb.indexOf("Linux");var nb=!!eb()&&-1!=(eb().appVersion||"").indexOf("X11");
function ob(){var a=fa.document;return a?a.documentMode:n}var pb;a:{var qb="",rb;if(ib&&fa.opera)var sb=fa.opera.version,qb="function"==typeof sb?sb():sb;else if(jb?rb=/rv\:([^\);]+)(\)|;)/:M?rb=/MSIE\s+([^\);]+)(\)|;)/:kb&&(rb=/WebKit\/(\S+)/),rb)var tb=rb.exec(db()),qb=tb?tb[1]:"";if(M){var ub=ob();if(ub>parseFloat(qb)){pb=String(ub);break a}}pb=qb}var vb={};
function xb(a){var b;if(!(b=vb[a])){b=0;for(var c=String(pb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(g)||["","",""],p=k.exec(h)||["","",""];if(0==l[0].length&&0==p[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==l[2].length)<(0==p[2].length)?-1:(0==l[2].length)>(0==p[2].length)?1:0)||(l[2]<p[2]?-1:l[2]>p[2]?1:0)}while(0==b)}b=vb[a]=0<=b}return b}var yb=fa.document,zb=!yb||!M?n:ob()||("CSS1Compat"==yb.compatMode?parseInt(pb,10):5);var Ab=!M||M&&9<=zb,Bb=M&&!xb("9");!kb||xb("528");jb&&xb("1.9b")||M&&xb("8")||ib&&xb("9.5")||kb&&xb("528");jb&&!xb("8")||M&&xb("9");var Cb=Array.prototype,Db=Cb.indexOf?function(a,b,c){return Cb.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Eb=Cb.forEach?function(a,b,c){Cb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Fb=Cb.map?function(a,b,c){return Cb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
ma(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Gb=Cb.some?function(a,b,c){return Cb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return q;return s};function Hb(a,b){var c=Db(a,b);0<=c&&Cb.splice.call(a,c,1)}function Ib(a,b,c){return 2>=arguments.length?Cb.slice.call(a,b):Cb.slice.call(a,b,c)};function Jb(){0!=Kb&&(this.Sj=Error().stack,pa(this))}var Kb=0;function Lb(a,b){this.type=a;this.currentTarget=this.target=b}w=Lb.prototype;w.cc=s;w.defaultPrevented=s;w.Md=q;w.stopPropagation=function(){this.cc=q};w.preventDefault=function(){this.defaultPrevented=q;this.Md=s};function Mb(a){Mb[" "](a);return a}Mb[" "]=ga;function Nb(a,b){a&&this.ha(a,b)}G(Nb,Lb);w=Nb.prototype;w.target=r;w.relatedTarget=r;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=s;w.altKey=s;w.shiftKey=s;w.metaKey=s;w.ni=s;w.Pa=r;
w.ha=function(a,b){var c=this.type=a.type;Lb.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(jb){var e;a:{try{Mb(d.nodeName);e=q;break a}catch(f){}e=s}e||(d=r)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=kb||a.offsetX!==n?a.offsetX:a.layerX;this.offsetY=kb||a.offsetY!==n?a.offsetY:a.layerY;this.clientX=a.clientX!==n?a.clientX:a.pageX;this.clientY=a.clientY!==n?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ni=$a?a.metaKey:a.ctrlKey;this.state=a.state;this.Pa=a;a.defaultPrevented&&this.preventDefault();delete this.cc};w.stopPropagation=function(){Nb.r.stopPropagation.call(this);this.Pa.stopPropagation?this.Pa.stopPropagation():this.Pa.cancelBubble=q};
w.preventDefault=function(){Nb.r.preventDefault.call(this);var a=this.Pa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,Bb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.kh=t("Pa");var Ob={},Pb={},Qb={},Rb={};function P(a,b,c,d,e){if(y(b)){for(var f=0;f<b.length;f++)P(a,b[f],c,d,e);return r}a=Sb(a,b,c,s,d,e);b=a.key;Ob[b]=a;return b}
function Sb(a,b,c,d,e,f){b||m(Error("Invalid event type"));e=!!e;var g=Pb;b in g||(g[b]={Y:0,sa:0});g=g[b];e in g||(g[e]={Y:0,sa:0},g.Y++);var g=g[e],h=pa(a),j;g.sa++;if(g[h]){j=g[h];for(var k=0;k<j.length;k++)if(g=j[k],g.Kb==c&&g.Be==f){if(g.dc)break;d||(j[k].ud=s);return j[k]}}else j=g[h]=[],g.Y++;var l=Tb,p=Ab?function(a){return l.call(p.src,p.Kb,a)}:function(a){a=l.call(p.src,p.Kb,a);if(!a)return a},k=p,g=new La;g.ha(c,k,a,b,e,f);g.ud=d;k.src=a;k.Kb=g;j.push(g);Qb[h]||(Qb[h]=[]);Qb[h].push(g);
a.addEventListener?(a==fa||!a.customEvent_)&&a.addEventListener(b,k,e):a.attachEvent(b in Rb?Rb[b]:Rb[b]="on"+b,k);return g}function Ub(a,b,c,d,e){if(y(b))for(var f=0;f<b.length;f++)Ub(a,b[f],c,d,e);else a=Sb(a,b,c,q,d,e),Ob[a.key]=a}function Vb(a,b,c,d,e){if(y(b))for(var f=0;f<b.length;f++)Vb(a,b[f],c,d,e);else{d=!!d;a:{f=Pb;if(b in f&&(f=f[b],d in f&&(f=f[d],a=pa(a),f[a]))){a=f[a];break a}a=r}if(a)for(f=0;f<a.length;f++)if(a[f].Kb==c&&a[f].capture==d&&a[f].Be==e){Wb(a[f].key);break}}}
function Wb(a){var b=Ob[a];if(!b||b.dc)return s;var c=b.src,d=b.type,e=b.ng,f=b.capture;c.removeEventListener?(c==fa||!c.customEvent_)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Rb?Rb[d]:Rb[d]="on"+d,e);c=pa(c);Qb[c]&&(e=Qb[c],Hb(e,b),0==e.length&&delete Qb[c]);b.dc=q;if(b=Pb[d][f][c])b.cg=q,Xb(d,f,c,b);delete Ob[a];return q}
function Xb(a,b,c,d){if(!d.Jd&&d.cg){for(var e=0,f=0;e<d.length;e++)d[e].dc?d[e].ng.src=r:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.cg=s;0==f&&(delete Pb[a][b][c],Pb[a][b].Y--,0==Pb[a][b].Y&&(delete Pb[a][b],Pb[a].Y--),0==Pb[a].Y&&delete Pb[a])}}function Yb(a,b,c,d,e){var f=1;b=pa(b);if(a[b]){var g=--a.sa,h=a[b];h.Jd?h.Jd++:h.Jd=1;try{for(var j=h.length,k=0;k<j;k++){var l=h[k];l&&!l.dc&&(f&=Zb(l,e)!==s)}}finally{a.sa=Math.max(g,a.sa),h.Jd--,Xb(c,d,b,h)}}return Boolean(f)}
function Zb(a,b){a.ud&&Wb(a.key);return a.handleEvent(b)}
function Tb(a,b){if(a.dc)return q;var c=a.type,d=Pb;if(!(c in d))return q;var d=d[c],e,f;if(!Ab){var g;if(!(g=b))a:{g=["window","event"];for(var h=fa;e=g.shift();)if(h[e]!=r)h=h[e];else{g=r;break a}g=h}e=g;g=q in d;h=s in d;if(g){if(0>e.keyCode||e.returnValue!=n)return q;a:{var j=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(k){j=q}if(j||e.returnValue==n)e.returnValue=q}}j=new Nb;j.ha(e,this);e=q;try{if(g){for(var l=[],p=j.currentTarget;p;p=p.parentNode)l.push(p);f=d[q];f.sa=f.Y;for(var u=l.length-
1;!j.cc&&0<=u&&f.sa;u--)j.currentTarget=l[u],e&=Yb(f,l[u],c,q,j);if(h){f=d[s];f.sa=f.Y;for(u=0;!j.cc&&u<l.length&&f.sa;u++)j.currentTarget=l[u],e&=Yb(f,l[u],c,s,j)}}else e=Zb(a,j)}finally{l&&(l.length=0)}return e}c=new Nb(b,this);return e=Zb(a,c)}var $b=0;function ac(a){return a+"_"+$b++};function bc(){Jb.call(this);this.Vj={};this.Qj=this}G(bc,Jb);bc.prototype.customEvent_=q;w=bc.prototype;w.Pe=r;w.Te=ea("Pe");w.addEventListener=function(a,b,c,d){P(this,a,b,c,d)};w.removeEventListener=function(a,b,c,d){Vb(this,a,b,c,d)};
w.dispatchEvent=function(a){var b=a.type||a,c=Pb;if(b in c){if(ma(a))a=new Lb(a,this);else if(a instanceof Lb)a.target=a.target||this;else{var d=a;a=new Lb(b,this);Oa(a,d)}var d=1,e,c=c[b],b=q in c,f;if(b){e=[];for(f=this;f;f=f.Pe)e.push(f);f=c[q];f.sa=f.Y;for(var g=e.length-1;!a.cc&&0<=g&&f.sa;g--)a.currentTarget=e[g],d&=Yb(f,e[g],a.type,q,a)&&a.Md!=s}if(s in c)if(f=c[s],f.sa=f.Y,b)for(g=0;!a.cc&&g<e.length&&f.sa;g++)a.currentTarget=e[g],d&=Yb(f,e[g],a.type,s,a)&&a.Md!=s;else for(e=this;!a.cc&&e&&
f.sa;e=e.Pe)a.currentTarget=e,d&=Yb(f,e,a.type,s,a)&&a.Md!=s;a=Boolean(d)}else a=q;return a};function Q(){bc.call(this);this.c="base";this.ea=window["X.counter"].Ui();this.f=s}G(Q,bc);Q.prototype.__defineGetter__("classname",t("c"));Q.prototype.__defineGetter__("id",t("ea"));F("X.base",Q);function cc(a,b){this.Ca=new ya(a);this.ca=new ya(b)}cc.prototype={h:function(){return new cc(this.Ca.h(),this.ca.h())},bc:function(){this.ca=Da(this.ca)}};function dc(a,b){this.ca=a;this.bd=b}dc.prototype={h:function(){return new dc(this.ca.h(),this.bd)},bc:function(){this.ca=Da(this.ca);this.bd=-this.bd}};function ec(a,b){this.qb=a;this.Td=b;var c=a[0].Ca,d=a[2].Ca,d=Ca(Ba(a[1].Ca,c).$b(Ba(d,c)));this.Ba=new dc(d,d.Jb(c))}ec.prototype={h:function(){var a=this.qb.map(function(a){return a.h()});return new ec(a,this.Td)},bc:function(){this.qb.reverse().map(function(a){a.bc()});this.Ba.bc()}};
function fc(a,b,c,d,e,f){for(var g=0,h=[],j=0;j<a.qb.length;j++){var k=b.ca.Jb(a.qb[j].Ca)-b.bd,k=-1E-5>k?2:1E-5<k?1:0,g=g|k;h.push(k)}switch(g){case 0:(0<b.ca.Jb(a.Ba.ca)?c:d).push(a);break;case 1:e.push(a);break;case 2:f.push(a);break;case 3:c=[];d=[];for(j=0;j<a.qb.length;j++){var l=(j+1)%a.qb.length,k=h[j],p=h[l],g=a.qb[j],l=a.qb[l];2!=k&&c.push(g);1!=k&&d.push(2!=k?g.h():g);3==(k|p)&&(k=(b.bd-b.ca.Jb(g.Ca))/b.ca.Jb(Ba(l.Ca,g.Ca)),k=new cc(g.Ca.Hd(l.Ca,k),g.ca.Hd(l.ca,k)),c.push(k),d.push(k.h()))}3<=
c.length&&e.push(new ec(c,a.Td));3<=d.length&&f.push(new ec(d,a.Td))}};function gc(a){this.fa=this.ga=this.Ba=r;this.C=[];a&&hc(this,a)}gc.prototype={h:function(){var a=new gc,b=this.Ba&&this.Ba.h();a.Ba=b;b=this.ga&&this.ga.h();a.ga=b;b=this.fa&&this.fa.h();a.fa=b;a.Rd(this.C.map(function(a){return a.h()}));return a},I:function(){for(var a=0;a<this.C.length;a++)this.C[a].bc();this.Ba.bc();this.ga&&this.ga.I();this.fa&&this.fa.I();a=this.ga;this.ga=this.fa;this.fa=a},Rd:ea("C")};
function hc(a,b){if(b.length){a.Ba||(a.Ba=b[0].Ba.h());for(var c=[],d=[],e=0;e<b.length;e++)fc(b[e],a.Ba,a.C,a.C,c,d);c.length&&(a.ga||(a.ga=new gc),hc(a.ga,c));d.length&&(a.fa||(a.fa=new gc),hc(a.fa,d))}}function ic(a){var b=a.C.slice();a.ga&&(b=b.concat(ic(a.ga)));a.fa&&(b=b.concat(ic(a.fa)));return b}function jc(a,b){a.C=kc(b,a.C);a.ga&&jc(a.ga,b);a.fa&&jc(a.fa,b)}
function kc(a,b){if(!a.Ba)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)fc(b[e],a.Ba,c,d,c,d);a.ga&&(c=kc(a.ga,c));d=a.fa?kc(a.fa,d):[];return c.concat(d)};function lc(){this.C=[]}function mc(a){var b=new lc;b.Rd(a);return b}
lc.prototype={h:function(){var a=new lc;a.Rd(this.C.map(function(a){return a.h()}));return a},$e:function(a){var b=new gc(this.h().C);a=new gc(a.h().C);jc(b,a);jc(a,b);a.I();jc(a,b);a.I();hc(b,ic(a));return mc(ic(b))},na:function(a){var b=new gc(this.h().C);a=new gc(a.h().C);b.I();jc(b,a);jc(a,b);a.I();jc(a,b);a.I();hc(b,ic(a));b.I();return mc(ic(b))},De:function(a){var b=new gc(this.h().C);a=new gc(a.h().C);b.I();jc(a,b);a.I();jc(b,a);jc(a,b);hc(b,ic(a));b.I();return mc(ic(b))},inverse:function(){var a=
this.h();a.C.map(function(a){a.bc()});return a},Rd:ea("C")};function nc(){Q.call(this);this.c="indexer";this.ne=[];this.Mj=[];this.fb={}}G(nc,Q);nc.prototype.add=function(a){a==r&&m(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.fb||(this.fb[b]=this.ne.length,this.ne.push(a));return this.fb[b]};nc.prototype.unique=t("ne");function oc(a){Q.call(this);this.c="file";this.md=a;this.f=q}G(oc,Q);function pc(){this.eb=this.o=r}pc.prototype.__defineSetter__("file",function(a){this.o=a==r||y(a)&&0==a.length?r:y(a)?1==a.length?new oc(a[0]):Fb(a,function(a){var c=new R;c.o=new oc(a);return c}):new oc(a)});pc.prototype.__defineGetter__("file",function(){return!this.o?"":y(this.o)?this.o.map(function(a){return a.o.md}):this.o.md});pc.prototype.__defineGetter__("filedata",function(){return y(this.o)?this.o.map(function(a){return a.eb}):this.eb});
pc.prototype.__defineSetter__("filedata",function(a){if(a==r||y(a)&&0==a.length)this.eb=r;if(y(a))if(1==a.length)this.eb=a[0];else{var b=this.o.length,c;for(c=0;c<b;c++)this.o[c].eb=a[c]}else this.eb=a});function qc(a){if("function"==typeof a.lb)return a.lb();if(ma(a))return a.split("");if(la(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ma(a)};function rc(a,b){this.L={};this.A=[];var c=arguments.length;if(1<c){c%2&&m(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.pe(a)}w=rc.prototype;w.Y=0;w.bf=0;w.Ad=t("Y");w.lb=function(){sc(this);for(var a=[],b=0;b<this.A.length;b++)a.push(this.L[this.A[b]]);return a};function tc(a){for(var b=0;b<a.A.length;b++){var c=a.A[b];if(uc(a.L,c)&&a.L[c]==s)return q}return s}w.clear=function(){this.L={};this.bf=this.Y=this.A.length=0};
w.remove=function(a){return uc(this.L,a)?(delete this.L[a],this.Y--,this.bf++,this.A.length>2*this.Y&&sc(this),q):s};function sc(a){if(a.Y!=a.A.length){for(var b=0,c=0;b<a.A.length;){var d=a.A[b];uc(a.L,d)&&(a.A[c++]=d);b++}a.A.length=c}if(a.Y!=a.A.length){for(var e={},c=b=0;b<a.A.length;)d=a.A[b],uc(e,d)||(a.A[c++]=d,e[d]=1),b++;a.A.length=c}}w.get=function(a,b){return uc(this.L,a)?this.L[a]:b};w.set=function(a,b){uc(this.L,a)||(this.Y++,this.A.push(a),this.bf++);this.L[a]=b};
w.pe=function(a){var b;if(a instanceof rc)sc(a),b=a.A.concat(),a=a.lb();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ma(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};w.h=function(){return new rc(this)};w.qg=function(){for(var a=new rc,b=0;b<this.A.length;b++){var c=this.A[b];a.set(this.L[c],c)}return a};function uc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function vc(){Q.call(this);this.c="colortable";this.fb=new rc;Ea(this,new pc)}G(vc,Q);vc.prototype.add=function(a,b,c,d,e,f){(!D(a)||!D(c)||!D(d)||!D(e)||!D(f))&&m(Error("Invalid color table entry."));this.fb.set(a,[b,c,d,e,f]);this.f=q};function wc(a,b,c){this.x=ja(a)?a:0;this.y=ja(b)?b:0;this.b=ja(c)?c:0}wc.prototype.h=function(){return new wc(this.x,this.y,this.b)};function S(a,b,c){this.x=a;this.y=b;this.b=c}G(S,wc);w=S.prototype;w.h=function(){return new S(this.x,this.y,this.b)};w.nb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};w.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};w.I=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};w.normalize=function(){return this.scale(1/this.nb())};w.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
w.na=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};function xc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return c*c+d*d+e*e}function yc(a,b){return new S(a.x+b.x,a.y+b.y,a.b+b.b)}function zc(a,b){return new S(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};L.g=S;w=L.g.prototype;w.h=S.prototype.h;w.nb=S.prototype.nb;w.scale=S.prototype.scale;w.I=S.prototype.I;w.add=S.prototype.add;w.na=S.prototype.na;w.normalize=function(){var a=this.nb();return 0==a?this.scale(0):this.scale(1/a)};L.g.Jb=function(a,b){return a.x*b.x+a.y*b.y+a.b*b.b};L.g.$b=zc;L.g.kb=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)};L.g.Hd=function(a,b,c){return new S(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y),a.b+c*(b.b-a.b))};L.g.prototype.__defineGetter__("xx",t("x"));
L.g.prototype.__defineGetter__("yy",t("y"));L.g.prototype.__defineGetter__("zz",t("b"));F("X.vector",L.g);F("X.vector.prototype.clone",L.g.prototype.h);F("X.vector.prototype.magnitude",L.g.prototype.nb);F("X.vector.prototype.scale",L.g.prototype.scale);F("X.vector.prototype.invert",L.g.prototype.I);F("X.vector.prototype.normalize",L.g.prototype.normalize);F("X.vector.prototype.add",L.g.prototype.add);F("X.vector.prototype.subtract",L.g.prototype.na);F("X.vector.dot",L.g.Jb);F("X.vector.cross",L.g.$b);
F("X.vector.distance",L.g.kb);F("X.vector.lerp",L.g.Hd);function Ac(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Ac.prototype.BYTES_PER_ELEMENT=8;Ac.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Ac.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Ac.BYTES_PER_ELEMENT=8}catch(Bc){}Ac.prototype.BYTES_PER_ELEMENT=Ac.prototype.BYTES_PER_ELEMENT;Ac.prototype.set=Ac.prototype.set;Ac.prototype.toString=Ac.prototype.toString;F("Float64Array",Ac)};function Cc(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Cc.prototype.BYTES_PER_ELEMENT=4;Cc.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Cc.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Cc.BYTES_PER_ELEMENT=4,Cc.prototype.BYTES_PER_ELEMENT=Cc.prototype.BYTES_PER_ELEMENT,Cc.prototype.set=Cc.prototype.set,Cc.prototype.toString=Cc.prototype.toString,F("Float32Array",Cc));function Dc(a,b,c,d,e,f,g,h,j,k,l,p,u,v,x,z,C){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=j;a[8]=k;a[9]=l;a[10]=p;a[11]=u;a[12]=v;a[13]=x;a[14]=z;a[15]=C;return a}function Ec(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Fc(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Gc(a,b,c,d,e){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=0}function Hc(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}
function Ic(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}function Jc(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],f=a[2]*b+a[6]*c+a[10]*d+a[14],g=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=f;a[15]=g;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);L.d={};L.d.Zf=function(a,b,c,d){c=c.na(b);c.normalize();d=L.g.$b(c,d);d.normalize();var e=L.g.$b(d,c);e.normalize();c.I();Gc(a,0,d.x,d.y,d.b);Gc(a,1,e.x,e.y,e.b);Gc(a,2,c.x,c.y,c.b);Jc(a,-b.x,-b.y,-b.b);return a};L.d.Qa=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new L.g((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};L.d.Pi=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Ic(a,b,d);Ic(a,c,e);Hc(a,b,e);Hc(a,c,d);return a};
L.d.Oi=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fc(a,b,d);Fc(a,c,e);Ec(a,b,e);Ec(a,c,d);return a};L.d.Vc=function(){var a=new Float32Array(16);a[0]=a[5]=a[10]=a[15]=1;return a};L.d.h=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
L.d.qg=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
L.d.Zg=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],j=a[7],k=a[8],l=a[9],p=a[10],u=a[11],v=a[12],x=a[13],z=a[14];a=a[15];return(b*g-c*f)*(p*a-u*z)-(b*h-d*f)*(l*a-u*x)+(b*j-e*f)*(l*z-p*x)+(c*h-d*g)*(k*a-u*v)-(c*j-e*g)*(k*z-p*v)+(d*j-e*h)*(k*x-l*v)};
L.d.I=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],j=a[6],k=a[7],l=a[8],p=a[9],u=a[10],v=a[11],x=a[12],z=a[13],C=a[14],E=a[15],A=c*h-d*g,B=c*j-e*g,H=c*k-f*g,I=d*j-e*h,N=d*k-f*h,J=e*k-f*j,K=l*z-p*x,O=l*C-u*x,aa=l*E-v*x,ca=p*C-u*z,W=p*E-v*z,da=u*E-v*C,V=A*da-B*W+H*ca+I*aa-N*O+J*K;if(0==V)return s;V=1/V;b[0]=(h*da-j*W+k*ca)*V;b[1]=(-d*da+e*W-f*ca)*V;b[2]=(z*J-C*N+E*I)*V;b[3]=(-p*J+u*N-v*I)*V;b[4]=(-g*da+j*aa-k*O)*V;b[5]=(c*da-e*aa+f*O)*V;b[6]=(-x*J+C*H-E*B)*V;b[7]=(l*J-u*H+v*B)*V;b[8]=
(g*W-h*aa+k*K)*V;b[9]=(-c*W+d*aa-f*K)*V;b[10]=(x*N-z*H+E*A)*V;b[11]=(-l*N+p*H-v*A)*V;b[12]=(-g*ca+h*O-j*K)*V;b[13]=(c*ca-d*O+e*K)*V;b[14]=(-x*I+z*B-C*A)*V;b[15]=(l*I-p*B+u*A)*V;return q};L.d.Fe=function(a,b,c,d,e){var f=b/2;b=e-d;var g=Math.sin(f);if(0==b||0==g||0==c)return a;f=Math.cos(f)/g;return Dc(a,f/c,0,0,0,0,f,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};L.d.Fh=function(a,b,c,d,e,f,g){return Dc(a,2*f/(c-b),0,0,0,0,2*f/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(g+f)/(g-f),-1,0,0,-(2*g*f)/(g-f),0)};
L.d.Gh=function(a,b,c,d,e,f,g){return Dc(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(g-f),0,-(c+b)/(c-b),-(e+d)/(e-d),-(g+f)/(g-f),1)};
L.d.multiply=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],j=a[5],k=a[6],l=a[7],p=a[8],u=a[9],v=a[10],x=a[11],z=a[12],C=a[13],E=a[14];a=a[15];var A=b[0],B=b[1],H=b[2],I=b[3],N=b[4],J=b[5],K=b[6],O=b[7],aa=b[8],ca=b[9],W=b[10],da=b[11],V=b[12],ab=b[13],ka=b[14];b=b[15];c[0]=d*A+h*B+p*H+z*I;c[1]=e*A+j*B+u*H+C*I;c[2]=f*A+k*B+v*H+E*I;c[3]=g*A+l*B+x*H+a*I;c[4]=d*N+h*J+p*K+z*O;c[5]=e*N+j*J+u*K+C*O;c[6]=f*N+k*J+v*K+E*O;c[7]=g*N+l*J+x*K+a*O;c[8]=d*aa+h*ca+p*W+z*da;c[9]=e*aa+j*ca+u*W+C*da;c[10]=f*
aa+k*ca+v*W+E*da;c[11]=g*aa+l*ca+x*W+a*da;c[12]=d*V+h*ab+p*ka+z*b;c[13]=e*V+j*ab+u*ka+C*b;c[14]=f*V+k*ab+v*ka+E*b;c[15]=g*V+l*ab+x*ka+a*b;return c};L.d.translate=Jc;L.d.scale=function(a,b,c,d){return Dc(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
L.d.rotate=function(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],j=a[3],k=a[4],l=a[5],p=a[6],u=a[7],v=a[8],x=a[9],z=a[10],C=a[11],E=Math.cos(b),A=Math.sin(b),B=1-E;b=c*c*B+E;var H=c*d*B+e*A,I=c*e*B-d*A,N=c*d*B-e*A,J=d*d*B+E,K=d*e*B+c*A,O=c*e*B+d*A;c=d*e*B-c*A;e=e*e*B+E;return Dc(a,f*b+k*H+v*I,g*b+l*H+x*I,h*b+p*H+z*I,j*b+u*H+C*I,f*N+k*J+v*K,g*N+l*J+x*K,h*N+p*J+z*K,j*N+u*J+C*K,f*O+k*c+v*e,g*O+l*c+x*e,h*O+p*c+z*e,j*O+u*c+C*e,a[12],a[13],a[14],a[15])};
L.d.Nd=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],j=a[10],k=a[11],l=Math.cos(b),p=Math.sin(b);a[4]=c*l+g*p;a[5]=d*l+h*p;a[6]=e*l+j*p;a[7]=f*l+k*p;a[8]=c*-p+g*l;a[9]=d*-p+h*l;a[10]=e*-p+j*l;a[11]=f*-p+k*l;return a};L.d.Od=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],j=a[10],k=a[11],l=Math.cos(b),p=Math.sin(b);a[0]=c*l+g*-p;a[1]=d*l+h*-p;a[2]=e*l+j*-p;a[3]=f*l+k*-p;a[8]=c*p+g*l;a[9]=d*p+h*l;a[10]=e*p+j*l;a[11]=f*p+k*l;return a};
L.d.Pd=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],j=a[6],k=a[7],l=Math.cos(b),p=Math.sin(b);a[0]=c*l+g*p;a[1]=d*l+h*p;a[2]=e*l+j*p;a[3]=f*l+k*p;a[4]=c*-p+g*l;a[5]=d*-p+h*l;a[6]=e*-p+j*l;a[7]=f*-p+k*l;return a};F("X.matrix.identity",L.d.Vc);F("X.matrix.clone",L.d.h);F("X.matrix.transpose",L.d.qg);F("X.matrix.determinant",L.d.Zg);F("X.matrix.invert",L.d.I);F("X.matrix.multiply",L.d.multiply);F("X.matrix.multiplyByVector",L.d.Qa);F("X.matrix.makePerspective",L.d.Fe);
F("X.matrix.makeFrustum",L.d.Fh);F("X.matrix.makeOrtho",L.d.Gh);F("X.matrix.makeLookAt",L.d.Zf);F("X.matrix.translate",L.d.translate);F("X.matrix.scale",L.d.scale);F("X.matrix.rotate",L.d.rotate);F("X.matrix.rotateX",L.d.Nd);F("X.matrix.rotateY",L.d.Od);F("X.matrix.rotateZ",L.d.Pd);F("X.matrix.swapRows",L.d.Pi);F("X.matrix.swapCols",L.d.Oi);function Kc(){Q.call(this);this.c="transform";this.ka=L.d.Vc()}G(Kc,Q);Kc.prototype.__defineGetter__("matrix",t("ka"));Kc.prototype.__defineSetter__("matrix",function(a){(a==r||!(a instanceof Float32Array))&&m(Error("Invalid matrix."));this.ka=a;this.n()});w=Kc.prototype;w.Nd=function(a){(!D(a)||-360>a||360<a)&&m(Error("Invalid angle."));L.d.Nd(this.ka,a*Math.PI/180);this.n()};w.Od=function(a){(!D(a)||-360>a||360<a)&&m(Error("Invalid angle."));L.d.Od(this.ka,a*Math.PI/180);this.n()};
w.Pd=function(a){(!D(a)||-360>a||360<a)&&m(Error("Invalid angle."));L.d.Pd(this.ka,a*Math.PI/180);this.n()};w.Ri=function(a){D(a)||m(Error("Invalid distance."));L.d.translate(this.ka,a,0,0);this.n()};w.Si=function(a){D(a)||m(Error("Invalid distance."));L.d.translate(this.ka,0,a,0);this.n()};w.Ti=function(a){D(a)||m(Error("Invalid distance."));L.d.translate(this.ka,0,0,a);this.n()};function Lc(a,b,c){a.ka[b+4*c]*=-1;a.n()}w.gh=function(){Lc(this,0,0)};w.hh=function(){Lc(this,1,1)};
w.ih=function(){Lc(this,2,2)};w.n=function(){this.f=q};F("X.transform",Kc);F("X.transform.prototype.rotateX",Kc.prototype.Nd);F("X.transform.prototype.rotateY",Kc.prototype.Od);F("X.transform.prototype.rotateZ",Kc.prototype.Pd);F("X.transform.prototype.translateX",Kc.prototype.Ri);F("X.transform.prototype.translateY",Kc.prototype.Si);F("X.transform.prototype.translateZ",Kc.prototype.Ti);F("X.transform.prototype.flipX",Kc.prototype.gh);F("X.transform.prototype.flipY",Kc.prototype.hh);
F("X.transform.prototype.flipZ",Kc.prototype.ih);F("X.transform.prototype.modified",Kc.prototype.n);function Mc(){Q.call(this);this.c="texture";this.xa=this.sb=this.o=r;this.Cb=this.Db=0;Ea(this,new pc)}G(Mc,Q);F("X.texture",Mc);function T(a,b){Q.call(this);this.c="triplets";this.Tb=Infinity;this.Qb=-Infinity;this.Ub=Infinity;this.Rb=-Infinity;this.Vb=Infinity;this.Sb=-Infinity;this.cd=[0,0,0];this.jf=q;this.F=0;this.N=new Float32Array(a);b!=r&&(this.N=b.N.subarray(0,b.N.length),this.F=this.N.length,this.Tb=b.Tb,this.Qb=b.Qb,this.Ub=b.Ub,this.Rb=b.Rb,this.Vb=b.Vb,this.Sb=b.Sb,this.cd=b.cd.slice(),this.jf=s)}G(T,Q);w=T.prototype;
w.add=function(a,b,c){this.Tb=Math.min(this.Tb,a);this.Qb=Math.max(this.Qb,a);this.Ub=Math.min(this.Ub,b);this.Rb=Math.max(this.Rb,b);this.Vb=Math.min(this.Vb,c);this.Sb=Math.max(this.Sb,c);this.cd=[(this.Tb+this.Qb)/2,(this.Ub+this.Rb)/2,(this.Vb+this.Sb)/2];this.jf=s;this.f=q;this.N[this.F++]=a;this.N[this.F++]=b;this.N[this.F++]=c;return this.F/3};w.ob=function(){if(this.F!=this.N.length){var a=new Float32Array(this.F);a.set(this.N.subarray(0,this.F));this.N=a}};
w.get=function(a){a*=3;return[this.N[a],this.N[a+1],this.N[a+2]]};w.remove=function(){m(Error("Not implemented."))};w.clear=function(){this.N=new Float32Array(this.N.length);this.f=q};T.prototype.__defineGetter__("count",function(){this.ob();return this.N.length/3});T.prototype.__defineGetter__("length",function(){this.ob();return this.N.length});F("X.triplets",T);F("X.triplets.prototype.add",T.prototype.add);F("X.triplets.prototype.resize",T.prototype.ob);F("X.triplets.prototype.get",T.prototype.get);
F("X.triplets.prototype.remove",T.prototype.remove);F("X.triplets.prototype.clear",T.prototype.clear);function Nc(){this.la=Oc;this.Yb=new Kc;this.Nb=[1,1,1];this.Fb=this.z=this.Z=this.j=this.i=r;this.nc=[];this.qa=q;this.mc=this.Mc=1;this.hc=r;this.Ec=s;this.ba=1;this.M=0;this.Lc=q}var Oc="TRIANGLES";Nc.prototype.__defineSetter__("type",function(a){return this.la=a});Nc.prototype.__defineGetter__("type",t("la"));Nc.prototype.__defineGetter__("texture",function(){this.z||(this.z=new Mc);return this.z});Nc.prototype.__defineGetter__("transform",t("Yb"));Nc.prototype.__defineGetter__("points",t("i"));
Nc.prototype.__defineSetter__("points",ea("i"));Nc.prototype.__defineGetter__("normals",t("j"));Nc.prototype.__defineSetter__("normals",ea("j"));Nc.prototype.__defineGetter__("colors",t("Z"));Nc.prototype.__defineSetter__("colors",ea("Z"));Nc.prototype.__defineGetter__("color",t("Nb"));Nc.prototype.__defineSetter__("color",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid color."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Nb=a;this.f=q});
Nc.prototype.__defineGetter__("opacity",t("ba"));Nc.prototype.__defineSetter__("opacity",function(a){(!D(a)||1<a||0>a)&&m(Error("Invalid opacity."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.ba=a;this.f=q});Nc.prototype.__defineGetter__("caption",t("hc"));Nc.prototype.__defineSetter__("caption",function(a){this.hc=a;this.f=q});Nc.prototype.__defineGetter__("visible",t("qa"));
Nc.prototype.__defineSetter__("visible",function(a){for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.qa=a;this.f=q});Nc.prototype.__defineGetter__("pointsize",t("Mc"));Nc.prototype.__defineSetter__("pointsize",function(a){D(a)||m(Error("Invalid point size."));this.Mc=a;this.f=q});Nc.prototype.__defineGetter__("magicmode",t("Ec"));Nc.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&m(Error("Invalid magic mode setting."));this.Ec=a;this.f=q});
Nc.prototype.__defineGetter__("linewidth",t("mc"));Nc.prototype.__defineSetter__("linewidth",function(a){D(a)||m(Error("Invalid line width."));this.mc=a;this.f=q});Nc.prototype.__defineGetter__("pickable",t("Lc"));Nc.prototype.__defineSetter__("pickable",function(a){"boolean"!=typeof a&&m(Error("Invalid pickable setting."));this.Lc=a;this.f=q});Nc.prototype.__defineGetter__("textureCoordinateMap",t("Fb"));Nc.prototype.__defineSetter__("textureCoordinateMap",ea("Pj"));function Pc(){this.Ka=Infinity;this.S=this.Ha=-Infinity;this.V=Infinity;this.xb=[0,0,0];this.vb=[1,1,1]}Pc.prototype.__defineGetter__("lowerThreshold",t("S"));Pc.prototype.__defineSetter__("lowerThreshold",ea("S"));Pc.prototype.__defineGetter__("upperThreshold",t("V"));Pc.prototype.__defineSetter__("upperThreshold",ea("V"));Pc.prototype.__defineGetter__("min",t("Ka"));Pc.prototype.__defineGetter__("max",t("Ha"));Pc.prototype.__defineGetter__("minColor",t("xb"));
Pc.prototype.__defineSetter__("minColor",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid min. color."));this.xb=a});Pc.prototype.__defineGetter__("maxColor",t("vb"));Pc.prototype.__defineSetter__("maxColor",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid max. color."));this.vb=a});function Qc(){Q.call(this);this.c="scalars";this.zc=this.t=r;this.wf=q;this.Zd=0;Ea(this,new pc);Ea(this,new Pc);this.xb=[0,1,0];this.vb=[1,0,0]}G(Qc,Q);Qc.prototype.__defineGetter__("array",t("t"));Qc.prototype.__defineSetter__("array",function(a){this.zc=this.t=a;this.f=q});Qc.prototype.__defineGetter__("interpolation",t("Zd"));Qc.prototype.__defineSetter__("interpolation",ea("Zd"));F("X.scalars",Qc);function U(a){Q.call(this);this.c="object";this.e=[];this.v=this.Q=r;Ea(this,new Nc);a!=r&&this.Zb(a)}G(U,Q);
U.prototype.Zb=function(a){this.la=a.la;this.Yb=new Kc;this.Yb.ka=new Float32Array(a.Yb.ka);this.Nb=a.Nb.slice();a.i&&(this.i=new T(a.i.length,a.i));a.j&&(this.j=new T(a.j.length,a.j));a.Z&&(this.Z=new T(a.Z.length,a.Z));this.z=a.z;this.Fb=a.Fb;a.o&&(this.o=new oc((new String(a.o.md)).toString()));this.ba=a.ba;this.e.length=0;var b=a.e;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.e.push(new L[b[d].c](b[d]));this.qa=a.qa;this.Mc=a.Mc;this.mc=a.mc;a.hc&&(this.hc=(new String(a.hc)).toString());this.Ec=
a.Ec;this.Lc=a.Lc;this.nc=a.nc.slice();this.f=q};U.prototype.__defineGetter__("colortable",function(){this.Q||(this.Q=new vc);return this.Q});U.prototype.__defineGetter__("scalars",function(){this.v||(this.v=new Qc);return this.v});U.prototype.__defineGetter__("children",t("e"));U.prototype.n=function(){var a=new Rc;a.aa=this;this.dispatchEvent(a)};
function Sc(a,b){(a==r||b==r||!(a instanceof U)||!(b instanceof U))&&m(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.ba?-1:1==b.ba?1:a.M!=r&&b.M!=r&&a.M>b.M?-1:1}F("X.object",U);F("X.object.prototype.modified",U.prototype.n);function Tc(){}function Uc(a){for(var b=a.i.count,c=[],d=0,d=0;d<b;d+=3){var e=a.i.get(d),f=a.i.get(d+1),g=a.i.get(d+2),h=a.j.get(d),j=a.j.get(d+1),k=a.j.get(d+2),l=a.Nb;a.Z&&0<a.Z.length&&(l=a.Z.get(d));var p=[];p.push(new cc(e,h));p.push(new cc(f,j));p.push(new cc(g,k));c.push(new ec(p,l))}return mc(c)}
function Vc(a,b){(b==r||!(b instanceof lc))&&m(Error("Invalid CSG object."));var c=new nc,d=[];Fb(b.C,function(a){var b=[],g=a.Td,b=Fb(a.qb,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Eg=Fb(c.unique(),function(a){return[a.Ca.x(),a.Ca.y(),a.Ca.b()]});a.Dg=Fb(c.unique(),function(a){return[a.ca.x(),a.ca.y(),a.ca.b()]});a.Cg=Fb(c.unique(),function(a){return!a.color?r:[a.color[0],a.color[1],a.color[2]]});a.i=new T(9*d.length);a.j=new T(9*d.length);
a.Z=new T(9*d.length);Fb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.Eg,j=this.Dg,k=this.Cg;this.i.add(d[b][0],d[b][1],d[b][2]);this.i.add(d[c][0],d[c][1],d[c][2]);this.i.add(d[a][0],d[a][1],d[a][2]);this.j.add(j[b][0],j[b][1],j[b][2]);this.j.add(j[c][0],j[c][1],j[c][2]);this.j.add(j[a][0],j[a][1],j[a][2]);k[b]&&this.Z.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.Z.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.Z.add(k[a][0],k[a][1],k[a][2])}.bind(a));0==a.Z.F&&(a.Z=r);a.la=Oc}
Tc.prototype.$e=function(a){(a==r||!(a instanceof lc)&&!(a instanceof U))&&m(Error("Invalid object."));var b=a;a instanceof U&&(b=Uc(b));a=new U;Ea(a,new Tc);Vc(a,Uc(this).$e(b));return a};Tc.prototype.na=function(a){(a==r||!(a instanceof lc)&&!(a instanceof U))&&m(Error("Invalid object."));var b=a;a instanceof U&&(b=Uc(b));a=new U;Ea(a,new Tc);Vc(a,Uc(this).na(b));return a};
Tc.prototype.De=function(a){(a==r||!(a instanceof lc)&&!(a instanceof U))&&m(Error("Invalid object."));var b=a;a instanceof U&&(b=Uc(b));a=new U;Ea(a,new Tc);Vc(a,Uc(this).De(b));return a};Tc.prototype.inverse=function(){var a=new U;Ea(a,new Tc);Vc(a,Uc(this).inverse());return a};F("X.constructable",Tc);F("X.constructable.prototype.intersect",Tc.prototype.De);F("X.constructable.prototype.inverse",Tc.prototype.inverse);F("X.constructable.prototype.subtract",Tc.prototype.na);
F("X.constructable.prototype.union",Tc.prototype.$e);function Wc(a){Lb.call(this,a);this.c="event"}G(Wc,Lb);var Xc=ac("pan"),Yc=ac("rotate"),Zc=ac("zoom"),$c=ac("scroll");ac("render");var ad=ac("resetview"),bd=ac("windowlevel"),cd=ac("modified"),dd=ac("progress"),ed=ac("hover"),fd=ac("hover_end");function gd(){Wc.call(this,bd);this.ee=this.oe=0}G(gd,Wc);function hd(){Wc.call(this,Xc);this.M=new L.g(0,0,0)}G(hd,Wc);function id(){Wc.call(this,Yc);this.M=new L.g(0,0,0)}G(id,Wc);function jd(){Wc.call(this,Zc);this.Ja=this.Ta=s}G(jd,Wc);
function kd(){Wc.call(this,$c);this.K=s}G(kd,Wc);function ld(){Wc.call(this,ed);this.td=this.sd=0}G(ld,Wc);function md(){Wc.call(this,fd)}G(md,Wc);function nd(){Wc.call(this,ad)}G(nd,Wc);function Rc(){Wc.call(this,cd);this.u=this.aa=r}G(Rc,Wc);function od(){Wc.call(this,dd);this.zf=0}G(od,Wc);function pd(a,b,c){a==r&&m(Error("Invalid GL Buffer."));b==r&&m(Error("Invalid number of items."));c==r&&m(Error("Invalid item size."));Q.call(this);this.c="buffer";this.w=a;this.tb=b;this.ub=c}G(pd,Q);function qd(a,b){this.x=ja(a)?a:0;this.y=ja(b)?b:0}w=qd.prototype;w.h=function(){return new qd(this.x,this.y)};function rd(a,b){return new qd(a.x-b.x,a.y-b.y)}w.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};w.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};w.translate=function(a,b){a instanceof qd?(this.x+=a.x,this.y+=a.y):(this.x+=a,D(b)&&(this.y+=b));return this};w.scale=function(a,b){var c=D(b)?b:a;this.x*=a;this.y*=c;return this};function sd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}w=sd.prototype;w.h=function(){return new sd(this.top,this.right,this.bottom,this.left)};w.contains=function(a){return!this||!a?s:a instanceof sd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};
w.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};w.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};w.translate=function(a,b){a instanceof qd?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,D(b)&&(this.top+=b,this.bottom+=b));return this};
w.scale=function(a,b){var c=D(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function td(a,b){this.width=a;this.height=b}td.prototype.h=function(){return new td(this.width,this.height)};td.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};td.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};td.prototype.scale=function(a,b){var c=D(b)?b:a;this.width*=a;this.height*=c;return this};function ud(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}w=ud.prototype;w.h=function(){return new ud(this.left,this.top,this.width,this.height)};w.Uf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,q}return s};
w.contains=function(a){return a instanceof ud?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function vd(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}w.kb=function(a){return Math.sqrt(vd(this,a))};
w.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};w.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};w.translate=function(a,b){a instanceof qd?(this.left+=a.x,this.top+=a.y):(this.left+=a,D(b)&&(this.top+=b));return this};
w.scale=function(a,b){var c=D(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};var wd;function xd(a,b){var c;c=a.className;c=ma(c)&&c.match(/\S+/g)||[];for(var d=Ib(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Db(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var yd=!M||M&&9<=zb;!jb&&!M||M&&M&&9<=zb||jb&&xb("1.9.1");M&&xb("9");function zd(a){return a?new Ad(Bd(a)):wd||(wd=new Ad)}function Cd(a){return ma(a)?document.getElementById(a):a}var Dd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ed(a,b,c){return Fd(document,arguments)}
function Fd(a,b){var c=b[0],d=b[1];if(!yd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Pa(d.name),'"');if(d.type){c.push(' type="',Pa(d.type),'"');var e={};Oa(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var f=a.createElement(c);if(d)if(ma(d))f.className=d;else if(y(d))xd.apply(r,[f].concat(d));else{var c=function(a,b){"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:b in Dd?f.setAttribute(Dd[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?f.setAttribute(b,
a):f[b]=a},g;for(g in d)c.call(n,d[g],g)}if(2<b.length){g=function(b){b&&f.appendChild(ma(b)?a.createTextNode(b):b)};for(d=2;d<b.length;d++)if(e=b[d],la(e)&&!(oa(e)&&0<e.nodeType)){var c=Eb,h;a:{if((h=e)&&"number"==typeof h.length){if(oa(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if(na(h)){h="function"==typeof h.item;break a}}h=s}if(h)if(h=e.length,0<h){for(var j=Array(h),k=0;k<h;k++)j[k]=e[k];e=j}else e=[];c(e,g)}else g(e)}return f}
function Gd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Hd(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Id(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Bd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Ad(a){this.O=a||fa.document||document}w=Ad.prototype;w.Bd=zd;
w.m=function(a){return ma(a)?this.O.getElementById(a):a};w.wg=Ad.prototype.m;w.tc=function(a,b,c){return Fd(this.O,arguments)};w.createElement=function(a){return this.O.createElement(a)};w.createTextNode=function(a){return this.O.createTextNode(String(a))};function Jd(a){return"CSS1Compat"==a.O.compatMode}
function Kd(a){var b=a.O;a=!kb&&"CSS1Compat"==b.compatMode?b.documentElement:b.body;b=b.parentWindow||b.defaultView;return M&&xb("10")&&b.pageYOffset!=a.scrollTop?new qd(a.scrollLeft,a.scrollTop):new qd(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}w.appendChild=function(a,b){a.appendChild(b)};w.contains=Id;function Ld(a,b){var c=Bd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,r))?c[b]||c.getPropertyValue(b)||"":""}function Md(a,b){return Ld(a,b)||(a.currentStyle?a.currentStyle[b]:r)||a.style&&a.style[b]}function Nd(a){a=a?Bd(a):document;return M&&!(M&&9<=zb)&&!Jd(zd(a))?a.body:a.documentElement}
function Od(a){var b=a.getBoundingClientRect();M&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Pd(a){if(M&&!(M&&8<=zb))return a.offsetParent;var b=Bd(a),c=Md(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Md(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return r}
function Qd(a){for(var b=new sd(0,Infinity,Infinity,0),c=zd(a),d=c.O.body,e=c.O.documentElement,f=!kb&&"CSS1Compat"==c.O.compatMode?c.O.documentElement:c.O.body;a=Pd(a);)if((!M||0!=a.clientWidth)&&(!kb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Md(a,"overflow")){var g=Rd(a),h;h=a;if(jb&&!xb("1.9")){var j=parseFloat(Ld(h,"borderLeftWidth"));if(Sd(h))var k=h.offsetWidth-h.clientWidth-j-parseFloat(Ld(h,"borderRightWidth")),j=j+k;h=new qd(j,parseFloat(Ld(h,"borderTopWidth")))}else h=new qd(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(c.O.parentWindow||c.O.defaultView||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new td(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&
b.bottom>b.top&&b.right>b.left?b:r}
function Rd(a){var b,c=Bd(a),d=Md(a,"position"),e=jb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new qd(0,0),g=Nd(c);if(a==g)return f;if(a.getBoundingClientRect)b=Od(a),a=Kd(zd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(kb&&"fixed"==Md(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ib||kb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=Pd(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!ib||"TR"!=b.tagName)f.y-=b.scrollTop}return f}
function Td(a){var b=new qd;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Od(a);b.x=c.left;b.y=c.top}else{var c=Kd(zd(a)),d=Rd(a);b.x=d.x-c.x;b.y=d.y-c.y}if(jb&&!xb(12)){var e;M?e="-ms-transform":kb?e="-webkit-transform":ib?e="-o-transform":jb&&(e="-moz-transform");var f;e&&(f=Md(a,e));f||(f=Md(a,"transform"));f?(a=f.match(Ud),a=!a?new qd(0,0):new qd(parseFloat(a[1]),parseFloat(a[2]))):a=new qd(0,0);b=new qd(b.x+a.x,b.y+a.y)}}else e=na(a.kh),f=a,a.targetTouches?f=a.targetTouches[0]:e&&a.Pa.targetTouches&&
(f=a.Pa.targetTouches[0]),b.x=f.clientX,b.y=f.clientY;return b}function Vd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Wd(a){if("none"!=Md(a,"display"))return Xd(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Xd(a);b.display=c;b.position=e;b.visibility=d;return a}
function Xd(a){var b=a.offsetWidth,c=a.offsetHeight,d=kb&&!b&&!c;return(!ja(b)||d)&&a.getBoundingClientRect?(a=Od(a),new td(a.right-a.left,a.bottom-a.top)):new td(b,c)}function Yd(a,b){a.style.display=b?"":"none"}function Sd(a){return"rtl"==Md(a,"direction")}function Zd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function $d(a,b){var c=a.currentStyle?a.currentStyle[b]:r;return c?Zd(a,c):0}var ae={thin:2,medium:4,thick:6};function be(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:r))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:r;return c in ae?ae[c]:Zd(a,c)}var Ud=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ce(a,b){bc.call(this);this.s=a;var c=oa(this.s)&&1==this.s.nodeType?this.s:this.s?this.s.body:r;this.Dh=!!c&&Sd(c);this.Xj=P(this.s,jb?"DOMMouseScroll":"mousewheel",this,b)}G(ce,bc);
ce.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Pa;if("mousewheel"==a.type){c=1;if(M||kb&&(bb||xb("532.0")))c=40;d=de(-a.wheelDelta,c);ja(a.wheelDeltaX)?(b=de(-a.wheelDeltaX,c),c=de(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ja(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;D(this.$f)&&(b=Math.min(Math.max(b,-this.$f),this.$f));D(this.ag)&&(c=Math.min(Math.max(c,-this.ag),this.ag));this.Dh&&(b=-b);b=new ee(d,a,b,c);this.dispatchEvent(b)};
function de(a,b){return kb&&($a||cb)&&0!=a%b?a:a/b}function ee(a,b,c,d){b&&this.ha(b,n);this.type="mousewheel";this.detail=a;this.Tj=c;this.vc=d}G(ee,Nb);M||kb&&xb("525");function fe(a){(a==r||!(a instanceof Element))&&m(Error("Could not add interactor to the given element."));Q.call(this);this.c="interactor";this.ua=a;this.fe=this.of=this.nf=this.pf=this.mf=this.qf=r;this.kd=q;this.Eb=this.wb=this.Xa=s;this.gb=[0,0];this.ae=new L.g(0,0,0);this.Dc=new L.g(0,0,0);this.Wf=0;this.yf=this.fd=r;this.xf=s;this.D={MOUSEWHEEL_ENABLED:q,MOUSECLICKS_ENABLED:q,KEYBOARD_ENABLED:q,HOVERING_ENABLED:q,CONTEXTMENU_ENABLED:s,TOUCH_ENABLED:q,TOUCH_BOUNCING_ENABLED:s}}G(fe,Q);
fe.prototype.__defineGetter__("config",t("D"));fe.prototype.__defineGetter__("leftButtonDown",t("Xa"));fe.prototype.__defineGetter__("middleButtonDown",t("wb"));fe.prototype.__defineGetter__("rightButtonDown",t("Eb"));
fe.prototype.ha=function(){this.D.MOUSEWHEEL_ENABLED?(this.fe=new ce(this.ua),this.qf=P(this.fe,"mousewheel",this.Xc.bind(this))):(Wb(this.qf),this.fe=r);this.D.MOUSECLICKS_ENABLED?(this.mf=P(this.ua,"mousedown",this.Qh.bind(this)),this.pf=P(this.ua,"mouseup",this.Vh.bind(this))):(Wb(this.mf),Wb(this.pf));this.ua.oncontextmenu=this.D.CONTEXTMENU_ENABLED?r:function(){return s};window.onkeydown=this.D.KEYBOARD_ENABLED?this.fg.bind(this):r;this.D.TOUCH_ENABLED?(this.D.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},s),this.Lg=P(this.ua,"touchstart",this.hi.bind(this)),this.Kg=P(this.ua,"touchmove",this.fi.bind(this)),this.Jg=P(this.ua,"touchend",this.bi.bind(this))):(Wb(this.Lg),Wb(this.Kg),Wb(this.Jg));Wb(this.nf);Wb(this.of);this.nf=P(this.ua,"mousemove",this.Sh.bind(this));this.of=P(this.ua,"mouseout",this.Th.bind(this))};
fe.prototype.Qh=function(a){0==a.button?this.Xa=q:1==a.button?this.wb=q:2==a.button&&(this.Eb=q);eval("this.onMouseDown("+this.Xa+","+this.wb+","+this.Eb+")");ge(this);a.preventDefault()};fe.prototype.Ph=ba();fe.prototype.Vh=function(a){0==a.button?this.Xa=s:1==a.button?this.wb=s:2==a.button&&(this.Eb=s);eval("this.onMouseUp("+this.Xa+","+this.wb+","+this.Eb+")");ge(this);a.preventDefault()};fe.prototype.__defineGetter__("mousePosition",t("gb"));w=fe.prototype;w.Uh=ba();
w.Th=function(a){this.kd=s;this.D.KEYBOARD_ENABLED&&(window.onkeydown=r);this.Eb=this.wb=this.Xa=s;ge(this);this.ae=new L.g(0,0,0);a.preventDefault()};w.Rh=ba();w.hi=function(a){a.preventDefault();a.ha(a.Pa.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Dc=new L.g(a.clientX,a.clientY,0);this.yf=setTimeout(this.di.bind(this,a),500)};w.gi=ba();
w.di=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new jd;a.Ta=q;a.Ja=this instanceof he;this.dispatchEvent(a);this.pd=q};w.ci=ba();function ie(a){clearTimeout(a.yf);if(a.pd){var b=new jd;b.Ta=s;b.Ja=a instanceof he;a.dispatchEvent(b)}a.pd=s}w.bi=function(a){a.preventDefault();eval("this.onTouchEnd()");ie(this)};w.ai=ba();
w.fi=function(a){a.preventDefault();this.pd||ie(this);this.touchmoveEvent=a=a.Pa;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new L.g(c[0],c[1],0);var b=c[0]>3*this.ua.clientWidth/4,d=c[0]<this.ua.clientWidth/4,e=c[1]<this.ua.clientHeight/4,c=c[1]>3*this.ua.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Dc.na(a);this.Dc=a.h();if(this.pd)a=new hd,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.M=e,this.dispatchEvent(a);
else if(this instanceof je&&(b||d))a=new kd,a.K=0>e.y,this.dispatchEvent(a);else if(this instanceof he||c)e.scale(3),a=new id,a.M=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new L.g(a[0],a[1],0),b=new L.g(b[0],b[1],0),e=xc(a,b),b=e-this.Wf,this.Wf=e,this.Dc.na(a),this.Dc=a.h(),10<Math.abs(b)&&(a=new jd,a.Ta=0<b,a.Ja=this instanceof he,this.dispatchEvent(a)))};w.ei=ba();
w.Sh=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.kd=q;this.D.KEYBOARD_ENABLED&&window.onkeydown==r&&(window.onkeydown=this.fg.bind(this));a.preventDefault();var b=a.shiftKey;this.xf=b;this.gb=[a.offsetX,a.offsetY];var c=new L.g(this.gb[0],this.gb[1],0);a=this.ae.na(c);this.ae=c.h();this.D.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.wb||this.Xa||this.Eb)&&ge(this),this.fd=setTimeout(function(){ge(this);var a=new ld;a.sd=c.x;a.td=c.y;this.dispatchEvent(a);
this.fd=r}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.nb()&&(this.Xa&&!b?(b=new id,a.scale(3),b.M=a,this.dispatchEvent(b)):this.wb||this.Xa&&b?(b=new hd,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.M=a,this.dispatchEvent(b)):this.Eb&&(b=new jd,b.Ta=0<a.y,b.Ja=s,this.dispatchEvent(b)))};function ge(a){a.fd&&clearTimeout(a.fd);a.dispatchEvent(new md)}w.Wh=ba();
w.Xc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");ge(this);a.preventDefault()};w.Nh=ba();
w.fg=function(a){if(this.kd){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");ge(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new nd,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new hd:b?a=new jd:(a=new id,this instanceof je&&(a=new kd)),a&&(c=new L.g(0,0,0),37==f?(c.x=5,a.K=s,b&&(a.K=q,a.Ta=q,a.Ja=s)):39==f?(c.x=-5,a.K=q,b&&(a.Ta=s,a.Ja=s)):38==f?(c.y=5,a.K=q,b&&(a.Ta=q,a.Ja=q)):40==f&&(c.y=-5,a.K=s,b&&(a.Ta=
s,a.Ja=q)),a.M=c,this.dispatchEvent(a)))}};F("X.interactor",fe);F("X.interactor.prototype.init",fe.prototype.ha);F("X.interactor.prototype.onMouseDown",fe.prototype.Ph);F("X.interactor.prototype.onMouseUp",fe.prototype.Uh);F("X.interactor.prototype.onMouseMove",fe.prototype.Rh);F("X.interactor.prototype.onMouseWheel",fe.prototype.Wh);F("X.interactor.prototype.onKey",fe.prototype.Nh);F("X.interactor.prototype.onTouchStart",fe.prototype.gi);F("X.interactor.prototype.onTouchMove",fe.prototype.ei);
F("X.interactor.prototype.onTouchEnd",fe.prototype.ai);F("X.interactor.prototype.onTouchHover",fe.prototype.ci);function je(a){fe.call(this,a);this.c="interactor2D"}G(je,fe);je.prototype.Xc=function(a){je.r.Xc.call(this,a);var b=new kd;a.vc==r&&(a.vc=0);b.K=0>a.vc;this.dispatchEvent(b)};function ke(a,b){(!D(a)||!D(b))&&m(Error("A camera needs valid width and height values."));Q.call(this);this.c="camera";this.wa=new L.g(0,0,100);this.jc=new L.g(0,0,0);this.K=new L.g(0,1,0);this.p=this.Kd(this.wa,this.jc)}G(ke,Q);ke.prototype.observe=function(a){(a==r||!(a instanceof fe))&&m(Error("Could not observe the interactor."));P(a,Yc,this.Zh.bind(this));P(a,Xc,this.Xh.bind(this));P(a,Zc,this.ki.bind(this))};
ke.prototype.Zh=function(a){a instanceof id||m(Error("Received no valid rotate event."));this.rotate(a.M)};ke.prototype.ki=function(a){a instanceof jd||m(Error("Received no valid zoom event."));a.Ta?this.ug(a.Ja):this.vg(a.Ja)};ke.prototype.Xh=function(a){a instanceof hd||m(Error("Received no valid pan event."));this.kg(a.M)};ke.prototype.__defineGetter__("view",t("p"));ke.prototype.__defineSetter__("view",function(a){(a==r||!(a instanceof Float32Array))&&m(Error("Invalid view matrix."));this.p=a});
ke.prototype.__defineGetter__("position",function(){return[this.wa.x,this.wa.y,this.wa.b]});ke.prototype.__defineSetter__("position",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid position."));this.wa=new L.g(a[0],a[1],a[2]);this.reset()});ke.prototype.__defineGetter__("focus",function(){return[this.jc.x,this.jc.y,this.jc.b]});ke.prototype.__defineSetter__("focus",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid focus"));this.jc=new L.g(a[0],a[1],a[2]);this.reset()});
ke.prototype.__defineGetter__("up",function(){return[this.K.x,this.K.y,this.K.b]});ke.prototype.__defineSetter__("up",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid up vector."));this.K=new L.g(a[0],a[1],a[2]);this.reset()});w=ke.prototype;w.reset=function(){this.p=this.Kd(this.wa,this.jc)};w.rotate=function(a){y(a)&&2==a.length?a=new L.g(a[0],a[1],0):a instanceof L.g||m(Error("Invalid distance vector for rotate operation."));return a};
w.kg=function(a){y(a)&&2==a.length?a=new L.g(a[0],a[1],0):a instanceof L.g||m(Error("Invalid distance vector for pan operation."));this.p[12]-=a.x;this.p[13]+=a.y};w.ug=function(a){var b=20;a!=r&&!a&&(b=1);this.p[14]+=b};w.vg=function(a){var b=30;a!=r&&!a&&(b=1);this.p[14]-=b};w.Kd=function(a,b){(!(a instanceof L.g)||!(b instanceof L.g))&&m(Error("3D vectors required for calculating the view."));return L.d.Vc()};F("X.camera",ke);F("X.camera.prototype.pan",ke.prototype.kg);
F("X.camera.prototype.rotate",ke.prototype.rotate);F("X.camera.prototype.zoomIn",ke.prototype.ug);F("X.camera.prototype.zoomOut",ke.prototype.vg);function le(a,b){ke.call(this,a,b);this.c="camera3D";this.gf=45;this.tf=L.d.Fe(L.d.Vc(),this.gf,a/b,1,1E4)}G(le,ke);le.prototype.rotate=function(a){a=le.r.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new L.g(this.p[1],this.p[5],this.p[9]),d=new L.g(this.p[0],this.p[4],this.p[8]);c.normalize();d.normalize();L.d.rotate(this.p,b,c.x,c.y,c.b);L.d.rotate(this.p,a,d.x,d.y,d.b)};le.prototype.Kd=function(a,b){var c=le.r.Kd.call(this,a,b);L.d.Zf(c,a,b,this.K);return c};
F("X.camera3D",le);function me(){Q.call(this);this.c="parser";this.$=r;this.F=0;this.Hg=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.gd=q;this.Oj=-Infinity;this.Nj=Infinity}G(me,Q);me.prototype.parse=function(){m(Error("The function parse() should be overloaded."))};function ne(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function oe(a,b,c){b===n&&(b=0);c===n&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
function Y(a,b,c){c!=r||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.$.slice(a.F,a.F+=c*d));if(a.Hg!=a.gd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function pe(a,b,c){L.Ga(a.c+".reslice");var d=b.R,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],j=b.l!=r,k=h*d,l=Array(g),p=Array(g),u=0,v=r;b.Q&&(v=b.Q.fb);for(var x=0,z=0,C=0,E=0,A=4*k,x=0;x<g;x++){l[x]=Array(h);p[x]=Array(h);for(var B=f.subarray(x*k,(x+1)*k),H=new Uint8Array(A),z=E=0;z<h;z++){l[x][z]=new c.data.constructor(d);p[x][z]=new c.data.constructor(d);for(C=0;C<d;C++){var u=B[E],I=0,N=0,J=0,K=0;v?(K=v.get(Math.floor(u)),K||(I=v.lb(),K=I[I.length-1]),I=255*K[1],N=255*K[2],J=255*K[3],K=255*K[4]):
(I=N=J=255*(u/e),K=255);var O=4*E;H[O]=I;H[++O]=N;H[++O]=J;H[++O]=K;l[x][z][C]=255*(u/e);p[x][z][C]=u;E++}}u=new Mc;u.xa=H;u.Db=d;u.Cb=h;B=b.hb.e[x];B.z=u;j&&(B.l=b.l.hb.e[x].z)}b.ie&&(d!=h?j?b.Q?(qe(g,d,h,p,b.Q,b.U,b.l.U,q),qe(g,h,d,p,b.Q,b.T,b.l.T,s)):(re(g,d,h,l,b.U,b.l.U,q),re(g,h,d,l,b.T,b.l.T,s)):b.Q?(qe(g,d,h,p,b.Q,b.U,r,q),qe(g,h,d,p,b.Q,b.T,r,s)):(re(g,d,h,l,b.U,r,q),re(g,h,d,l,b.T,r,s)):j?b.Q?ue(g,d,h,l,b.Q,b.T,b.l.T,b.U,b.l.U):ve(g,d,h,l,b.T,b.l.T,b.U,b.l.U):b.Q?ue(g,d,h,p,b.Q,b.T,r,b.U,
r):ve(g,d,h,l,b.T,r,b.U,r));L.ta(a.c+".reslice");return p}function re(a,b,c,d,e,f,g){for(var h=4*a*b,j=0,j=0;j<c;j++){for(var k=new Uint8Array(h),l=0,p=0,l=0;l<a;l++)for(var u=0,v=d[l],u=0;u<b;u++){var x,z=x=g?v[j][u]:v[u][j],C=x,E=4*p;k[E]=x;k[++E]=z;k[++E]=C;k[++E]=255;p++}l=new Mc;l.xa=k;l.Db=b;l.Cb=a;k=e.e[j];k.z=l;f&&(k.l=f.e[j].z)}}
function qe(a,b,c,d,e,f,g,h){e=e.fb;for(var j=4*a*b,k=0,k=0;k<c;k++){for(var l=new Uint8Array(j),p=0,u=0,p=0;p<a;p++)for(var v=d[p],x=0,x=0;x<b;x++){var z=e.get(Math.floor(h?v[k][x]:v[x][k]));z||(z=e.lb(),z=z[z.length-1]);var C=255*z[2],E=255*z[3],A=255*z[4],B=4*u;l[B]=255*z[1];l[++B]=C;l[++B]=E;l[++B]=A;u++}p=new Mc;p.xa=l;p.Db=b;p.Cb=a;l=f.e[k];l.z=p;g&&(l.l=g.e[k].z)}}
function ve(a,b,c,d,e,f,g,h){for(var j=4*a*b,k=0,k=0;k<c;k++){for(var l=new Uint8Array(j),p=new Uint8Array(j),u=0,v=0,v=0;v<a;v++)for(var x=d[v],z=0,z=0;z<b;z++){var C=x[z][k],E=C,A=C,B=4*u;l[B]=C;l[++B]=E;l[++B]=A;l[++B]=255;A=E=C=B=x[k][z];B=4*u;p[B]=C;p[++B]=E;p[++B]=A;p[++B]=255;u++}u=new Mc;u.xa=l;u.Db=b;u.Cb=a;l=e.e[k];l.z=u;f&&(l.l=f.e[k].z);l=new Mc;l.xa=p;l.Db=b;l.Cb=a;p=g.e[k];p.z=l;h&&(p.l=h.e[k].z)}}
function ue(a,b,c,d,e,f,g,h,j){e=e.fb;for(var k=4*a*b,l=0,l=0;l<c;l++){for(var p=new Uint8Array(k),u=new Uint8Array(k),v=0,x=0,x=0;x<a;x++)for(var z=d[x],C=0,C=0;C<b;C++){var E=e.get(Math.floor(z[C][l]));if(!E)var A=e.lb(),E=A[A.length-1];var B=255*E[2],H=255*E[3],I=255*E[4],A=4*v;p[A]=255*E[1];p[++A]=B;p[++A]=H;p[++A]=I;A=e.get(Math.floor(z[l][C]));A||(A=e.lb(),A=A[A.length-1]);E=255*A[1];B=255*A[2];H=255*A[3];I=255*A[4];A=4*v;u[A]=E;u[++A]=B;u[++A]=H;u[++A]=I;v++}v=new Mc;v.xa=p;v.Db=b;v.Cb=a;p=
f.e[l];p.z=v;g&&(p.l=g.e[l].z);p=new Mc;p.xa=u;p.Db=b;p.Cb=a;u=h.e[l];u.z=p;j&&(u.l=j.e[l].z)}};function we(){me.call(this);this.c="parserIMAGE"}G(we,me);we.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||m(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;Ub(f,"load",this.mi.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};we.prototype.mi=function(a,b,c){b.sb=a;b.xa=r;a=new Rc;a.aa=c;a.u=b;this.dispatchEvent(a)};F("X.parserIMAGE",we);F("X.parserIMAGE.prototype.parse",we.prototype.parse);function xe(a,b){ke.call(this,a,b);this.c="camera2D"}G(xe,ke);xe.prototype.rotate=function(a){a=xe.r.rotate.call(this,a);var b=new gd;0<a.x?b.oe--:0>a.x&&b.oe++;0<a.y?b.ee++:0>a.y&&b.ee--;this.dispatchEvent(b)};function ye(){Q.call(this);this.c="shaders";this.qd="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.qd=a+="}\n";this.ed="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";a+="   gl_FragColor = textureSum;\n";
a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";
a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.ed=a+="}\n"}G(ye,Q);
var ze={yj:"vertexPosition",xj:"vertexNormal",wj:"vertexColor",Aj:"vertexTexturePos",zj:"vertexScalar"},Ae={Bj:"view",fj:"perspective",Xi:"center",ej:"objectTransform",sj:"useObjectColor",cj:"objectColor",uj:"useScalars",oj:"scalarsReplaceMode",lj:"scalarsMin",ij:"scalarsMax",mj:"scalarsMinColor",jj:"scalarsMaxColor",nj:"scalarsMinThreshold",kj:"scalarsMaxThreshold",hj:"scalarsInterpolation",gj:"pointSize",dj:"objectOpacity",bj:"normal",tj:"usePicking",vj:"useTexture",rj:"useLabelMapTexture",$i:"labelmapOpacity",
Zi:"labelmapColor",pj:"textureSampler",qj:"textureSampler2",Cj:"volumeLowerThreshold",Ij:"volumeUpperThreshold",Fj:"volumeScalarMin",Dj:"volumeScalarMax",Gj:"volumeScalarMinColor",Ej:"volumeScalarMaxColor",Kj:"volumeWindowLow",Jj:"volumeWindowHigh",Hj:"volumeTexture"};function Be(a){U.call(this);this.c="slice";this.k=[0,0,0];this.kc=[0,0,1];this.K=[0,1,0];this.B=this.H=10;this.Fb=[0,1,0,0,1,1,1,1,1,0,0,0];this.l=this.jb=r;this.Sa=q;this.gc=[1,1,1];a!=r&&this.Zb(a)}G(Be,U);Be.prototype.Zb=function(a){this.k=a.k.slice();this.kc=a.kc.slice();this.K=a.K.slice();this.H=a.H;this.B=a.B;this.jb=a.jb;this.l=a.l;this.Sa=a.Sa;this.gc=a.gc;this.Gg=a.Gg;Be.r.Zb.call(this,a)};
Be.prototype.uc=function(){var a=new S(this.kc[0],this.kc[1],this.kc[2]),b=new S(this.K[0],this.K[1],this.K[2]),c=zc(b,a),d=new S(this.k[0],this.k[1],this.k[2]),e=new S(1,1,1);1==a.x?(e=new S(this.k[0],this.B/2,this.H/2),this.Fb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new S(this.H/2,this.k[1],this.B/2),this.Fb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new S(this.H/2,this.B/2,this.k[2]));var f=yc(c.h().I(),b.h().I()),f=new S(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=yc(c.h().I(),b),g=new S(g.x*e.x,g.y*e.y,
g.b*e.b);g.add(d);var h=yc(c,b.h().I()),h=new S(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var j=h,b=yc(c,b),b=new S(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.i=new T(18);this.j=new T(18);this.i.add(f.x,f.y,f.b);this.i.add(g.x,g.y,g.b);this.i.add(h.x,h.y,h.b);this.i.add(j.x,j.y,j.b);this.i.add(b.x,b.y,b.b);this.i.add(d.x,d.y,d.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.Sa&&(a=new U,a.i=new T(24),a.j=
new T(24),a.i.add(f.x,f.y,f.b),a.i.add(g.x,g.y,g.b),a.i.add(g.x,g.y,g.b),a.i.add(b.x,b.y,b.b),a.i.add(b.x,b.y,b.b),a.i.add(h.x,h.y,h.b),a.i.add(h.x,h.y,h.b),a.i.add(f.x,f.y,f.b),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.Nb=[this.gc[0],this.gc[1],this.gc[2]],a.la="LINES",a.mc=2,this.e.push(a))};F("X.slice",Be);function R(a){U.call(this);this.c="volume";this.k=[0,0,0];this.R=[10,10,10];this.J=[1,1,1];this.sb=[];this.Cc=this.Wa=this.Bc=this.Va=this.Ac=this.Ua=0;this.T=new U;this.U=new U;this.hb=new U;this.rd=this.Na=s;this.Hb=0;this.l=r;this.Sa=q;this.X=Infinity;this.W=-Infinity;this.ie=q;Ea(this,new pc);Ea(this,new Pc);a!=r&&this.Zb(a)}G(R,U);
R.prototype.Zb=function(a){window.console.log(a);this.k=a.k.slice();this.R=a.R.slice();this.J=a.J.slice();this.Ua=a.Ua;this.Ac=a.Ac;this.Va=a.Va;this.Bc=a.Bc;this.Wa=a.Wa;this.Cc=a.Cc;this.T=new U(a.T);this.U=new U(a.U);this.hb=new U(a.hb);this.Na=a.Na;this.rd=a.rd;this.Hb=a.Hb;this.l=a.l;this.Sa=a.Sa;R.r.Zb.call(this,a)};
R.prototype.uc=function(){this.e.length=0;this.T.e.length=0;this.U.e.length=0;this.hb.e.length=0;this.e.push(this.T);this.e.push(this.U);this.e.push(this.hb);for(var a=0,a=0;3>a;a++){for(var b=(this.R[a]-1)/2,c=b,d=0,d=0;d<this.R[a];d++){var e=-b*this.J[a]+d*this.J[a],f=[[this.k[0]+e,this.k[1],this.k[2]],[this.k[0],this.k[1]+e,this.k[2]],[this.k[0],this.k[1],this.k[2]+e]],e=this.e[a].e,g=0,h=0,j=[1,1,1],k=this.Sa;0==a?(g=this.R[2]*this.J[2]-this.J[2],h=this.R[1]*this.J[1]-this.J[1],j=[1,1,0]):1==
a?(g=this.R[0]*this.J[0]-this.J[0],h=this.R[2]*this.J[2]-this.J[2],j=[1,0,0]):2==a&&(g=this.R[0]*this.J[0]-this.J[0],h=this.R[1]*this.J[1]-this.J[1],j=[0,1,0]);this.jb!=r&&(k=s);var l=new Be,p=l,f=f[a],u=[[1,0,0],[0,1,0],[0,0,1]][a],v=[[0,1,0],[0,0,-1],[0,1,0]][a];(f==r||!y(f)||3!=f.length)&&m(Error("Invalid center."));(u==r||!y(u)||3!=u.length)&&m(Error("Invalid front direction."));(v==r||!y(v)||3!=v.length)&&m(Error("Invalid up direction."));D(g)||m(Error("Invalid width."));D(h)||m(Error("Invalid height."));
var x=s;k!=r&&(x=k);k=[1,1,1];j!=r&&(k=j);p.k=f;p.kc=u;p.K=v;p.H=g;p.B=h;p.Sa=x;p.gc=k;p.uc();l.jb=this;l.visible=d==Math.floor(c);e.push(l)}0==a?this.Ac=this.Ua=c:1==a?this.Bc=this.Va=c:2==a&&(this.Cc=this.Wa=c)}this.f=q};
R.prototype.n=function(a){a="undefined"!==typeof a?a:q;if(0<this.e.length){this.Na!=this.rd&&(this.Na?(this.e[0].e[parseInt(this.Ua,10)].visible=s,this.e[1].e[parseInt(this.Va,10)].visible=s,this.e[2].e[parseInt(this.Wa,10)].visible=s):this.e[this.Hb].visible=s,this.f=q,this.rd=this.Na);if(!this.qa)return;if(this.Na)Ce(this,this.Hb);else for(var b=0,b=0;3>b;b++){var c=this.e[b],d=0,e=0;0==b?(d=this.Ua,e=this.Ac,this.Ac=this.Ua):1==b?(d=this.Va,e=this.Bc,this.Bc=this.Va):2==b&&(d=this.Wa,e=this.Cc,
this.Cc=this.Wa);c.e[parseInt(e,10)].visible=s;c=c.e[parseInt(d,10)];c.visible=q;c.ba=1}}a&&R.r.n.call(this)};R.prototype.__defineGetter__("dimensions",t("R"));R.prototype.__defineGetter__("volumeRendering",t("Na"));R.prototype.__defineSetter__("volumeRendering",function(a){this.Na=a;this.n(s)});R.prototype.__defineGetter__("visible",t("qa"));
R.prototype.__defineSetter__("visible",function(a){if(a)this.qa=a,this.n(s);else{for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.qa=a;this.f=q}});R.prototype.__defineGetter__("center",t("k"));R.prototype.__defineSetter__("center",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid center."));this.k=a});R.prototype.__defineGetter__("image",t("sb"));R.prototype.__defineGetter__("labelmap",function(){this.l||(this.l=new De(this));return this.l});
R.prototype.__defineGetter__("indexX",t("Ua"));R.prototype.__defineSetter__("indexX",function(a){D(a)&&(0<=a&&a<this.T.e.length)&&(this.Ua=a,this.n(s))});R.prototype.__defineGetter__("indexY",t("Va"));R.prototype.__defineSetter__("indexY",function(a){D(a)&&(0<=a&&a<this.U.e.length)&&(this.Va=a,this.n(s))});R.prototype.__defineGetter__("indexZ",t("Wa"));R.prototype.__defineSetter__("indexZ",function(a){D(a)&&(0<=a&&a<this.hb.e.length)&&(this.Wa=a,this.n(s))});
R.prototype.__defineGetter__("windowLow",t("X"));R.prototype.__defineSetter__("windowLow",ea("X"));R.prototype.__defineGetter__("windowHigh",t("W"));R.prototype.__defineSetter__("windowHigh",ea("W"));R.prototype.__defineGetter__("borders",t("Sa"));R.prototype.__defineSetter__("borders",ea("Sa"));R.prototype.__defineGetter__("reslicing",t("ie"));R.prototype.__defineSetter__("reslicing",ea("ie"));
function Ce(a,b){if(a.Na&&(a.f||b!=a.Hb)){var c=a.e[a.Hb];c.visible=s;var c=a.e[b],d=c.e.length,e;for(e=0;e<d;e++)c.e[e].qa=q;a.Hb=b;a.f=s}}F("X.volume",R);F("X.volume.prototype.modified",R.prototype.n);function Ee(){me.call(this);this.c="parserSTL"}G(Ee,me);
Ee.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");this.$=c;var d=b.i,e=b.j;if("solid"==oe(Y(this,"uchar",5))){b.i=d=new T(c.byteLength);b.j=e=new T(c.byteLength);var f=d,d=e,e=Y(this,"uchar",c.byteLength-5);c=e.length;var g=s,h=s,j=0,k;for(k=0;k<c;k++)if(10==e[k]){if(g||h){var l=oe(e,j,k).split(" "),h=parseFloat(l[0]),p=parseFloat(l[1]),l=parseFloat(l[2]);g?(d.add(h,p,l),d.add(h,p,l),d.add(h,p,l)):f.add(h,p,l);h=g=s}}else 32==e[k-1]&&(102==e[k]?(j=k+=13,g=q):118==e[k]&&(j=k+=7,h=q))}else{this.F=
80;f=Y(this,"uint");b.i=d=new T(9*f);b.j=e=new T(9*f);for(c=c=0;c<f;c++)g=Y(this,"float",12),j=g[0],k=g[1],h=g[2],e.add(j,k,h),e.add(j,k,h),e.add(j,k,h),d.add(g[3],g[4],g[5]),d.add(g[6],g[7],g[8]),d.add(g[9],g[10],g[11]),this.F+=2}L.ta(this.c+".parse");f=new Rc;f.aa=b;f.u=a;this.dispatchEvent(f)};F("X.parserSTL",Ee);F("X.parserSTL.prototype.parse",Ee.prototype.parse);function Fe(){me.call(this);this.c="parserDCM"}G(Fe,me);Fe.prototype.parse=function(a,b,c){c=this.Zc(c,b);if(c.Id==c.Za){var d=c.We.length,e,f=0;for(e=0;e<d;e++){var g=c.We[e];g!==n&&(g*=c.cb,c.data.set(c.Tc.subarray(g,g+c.cb),f*c.cb),f++)}b.R=[c.za[0],c.za[1],c.za[2]];Infinity==c.ma[2]&&(c.ma[2]=1);b.J=[c.ma[0],c.ma[1],c.ma[2]];e=ne(c.data);d=e[0];e=e[1];c.min=b.Ka=b.X=d;c.max=b.Ha=b.W=e;-Infinity==b.S&&(b.S=d);Infinity==b.V&&(b.V=e);b.uc();b.sb=pe(this,b,c)}c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};
Fe.prototype.Zc=function(a,b){this.$=a;var c=0;if(b.fc!=r){g=b.fc;h=Y(this,"ushort",this.$.byteLength-2*g.cb);j=0;for(k=2;0<k;)if(d=h[j++],32==d)if(f=h[j++],19==f){j++;d=h[j++];for(f=0;f<d/2;f++)l=h[j++],p=l&255,l=(l&65280)>>8,c+=String.fromCharCode(p),c+=String.fromCharCode(l),c=parseInt(c,10);k--}else if(4161==f){j++;for(var d=h[j++],e="",f=0;f<d/2;f++)l=h[j++],p=l&255,l=(l&65280)>>8,e+=String.fromCharCode(p),e+=String.fromCharCode(l);g.ma=[g.ma[0],g.ma[1],Math.min(Math.abs(g.Yf-e),g.ma[2])];g.Yf=
e;k--}g.za[2]++}else{var g={rows:0,cols:0,ma:r,qe:0,Qg:0,Za:1,Lh:1,Yf:r,Id:0,cb:0,Tc:r,Qe:0,We:[],data:r,min:Infinity,max:-Infinity};g.Za=b.o.length;g.Za==r&&(g.Za=1);for(var h=Y(this,"ushort",this.$.byteLength),j=66,d=r,f=r,d=r,k=7;0<k;)if(d=h[j++],40==d)switch(f=h[j++],j++,d=h[j++],f){case 16:g.rows=h[j++];k--;break;case 17:g.cols=h[j++];k--;break;case 256:g.qe=h[j++];k--;break;case 257:g.Qg=h[j++];k--;break;case 2:g.Lh=h[j++];k--;break;case 48:e="";for(f=f=0;f<d/2;f++)var l=h[j++],p=l&255,l=(l&
65280)>>8,e=e+String.fromCharCode(p),e=e+String.fromCharCode(l);e=e.split("\\");g.ma=[+e[0],+e[1],Infinity];k--}else if(32==d&&(f=h[j++],19==f)){j++;d=h[j++];for(f=0;f<d/2;f++)l=h[j++],p=l&255,l=(l&65280)>>8,c+=String.fromCharCode(p),c+=String.fromCharCode(l),c=parseInt(c,10);k--}b.fc=g;g.za=[g.cols,g.rows,1];g.cb=g.rows*g.cols;switch(g.qe){case 8:g.Tc=new Uint8Array(g.cols*g.rows*g.Za);g.data=new Uint8Array(g.cols*g.rows*g.Za);break;case 16:g.Tc=new Uint16Array(g.cols*g.rows*g.Za);g.data=new Uint16Array(g.cols*
g.rows*g.Za);break;case 32:g.Tc=new Uint32Array(g.cols*g.rows*g.Za),g.data=new Uint32Array(g.cols*g.rows*g.Za)}}this.F=this.$.byteLength-2*g.cb;h=r;switch(g.qe){case 8:h=Y(this,"uchar",g.cb);break;case 16:h=Y(this,"ushort",g.cb);break;case 32:h=Y(this,"uint",g.cb)}g.We[c]=g.Qe;g.Tc.set(h,g.Qe*g.cb);g.Qe++;++g.Id;return g};F("X.parserDCM",Fe);F("X.parserDCM.prototype.parse",Fe.prototype.parse);function Ge(){me.call(this);this.c="parserVTK"}G(Ge,me);
Ge.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");var d=b.i,e=b.j,f=new Uint8Array(c),g="";b.i=d=new T(c.byteLength);b.j=e=new T(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=oe(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.Pc=this.Qc=r;this.Pb=[];this.va=Oc;this.ge=this.Ab=this.rb=this.Bb=s;c=0;for(h=g%8;h--;)He(this,f[c]),c++;for(h=0.125*g^0;h--;)He(this,f[c]),c++,He(this,f[c]),c++,He(this,f[c]),c++,He(this,f[c]),c++,He(this,f[c]),c++,He(this,f[c]),c++,He(this,f[c]),c++,
He(this,f[c]),c++;c=this.Qc;var f=this.Pc,g=f.length,j=h=this.Pb.length;do{var k=this.Pb[h-j],l=k.length,p;for(p=0;p<l&&!("LINES"==this.va&&p+1>=l);p++){var u=parseInt(k[p],10),v=c.get(u);d.add(v[0],v[1],v[2]);var x=u,z=v;"LINES"==this.va?(x=parseInt(k[p+1],10),z=c.get(x),d.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.va&&(0==p||p==l-1)&&d.add(v[0],v[1],v[2]);u<g?(z=f.get(u),e.add(z[0],z[1],z[2]),"LINES"==this.va?(x=f.get(x),e.add(x[0],x[1],x[2])):"TRIANGLE_STRIPS"==this.va&&(0==p||p==l-1)&&e.add(z[0],
z[1],z[2])):(x=new S(v[0],v[1],v[2]),x.normalize(),e.add(x.x,x.y,x.b),"LINES"==this.va?(x=new S(z[0],z[1],z[2]),x.normalize(),e.add(x.x,x.y,x.b)):"TRIANGLE_STRIPS"==this.va&&(0==p||p==l-1)&&e.add(x.x,x.y,x.b))}j--}while(0<j);b.la=this.va;L.ta(this.c+".parse");d=new Rc;d.aa=b;d.u=a;this.dispatchEvent(d)};
function He(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Bb=q;a.rb=s;a.Ab=s;c=parseInt(c[1],10);a.Qc=new T(3*c);a.Pc=new T(3*c);return;case "VERTICES":a.rb=q;a.Bb=s;a.Ab=s;c=parseInt(c[1],10);3<=c?a.va=Oc:1==c?a.va="POINTS":m(Error("This VTK file is not supported!"));a.Pb=[];return;case "TRIANGLE_STRIPS":a.rb=q;a.Bb=s;a.Ab=s;a.va="TRIANGLE_STRIPS";a.Pb=[];return;case "LINES":a.rb=q;a.Bb=s;a.Ab=s;a.va="LINES";a.Pb=[];return;case "POLYGONS":a.rb=q;
a.Bb=s;a.Ab=s;a.va="POLYGONS";a.Pb=[];return;case "POINT_DATA":a.Ab=q;a.Bb=s;a.rb=s;return}if(a.Bb)if(1==d||isNaN(parseFloat(e)))a.Bb=s;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.Qc.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Qc.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Qc.add(d,e,c))}else a.rb?1==d||isNaN(parseFloat(e))?a.rb=s:(c=c.slice(1),a.Pb.push(c)):a.Ab&&("NORMALS"==e?a.ge=q:1==d||isNaN(parseFloat(e))?
(a.Ab=s,a.ge=s):a.ge&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.Pc.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Pc.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Pc.add(d,e,c))))}F("X.parserVTK",Ge);F("X.parserVTK.prototype.parse",Ge.prototype.parse);function Ie(){me.call(this);this.c="parserFSM";this.gd=s}G(Ie,me);
Ie.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");this.$=c;var d=b.i,e=b.j;b.nc=[];var f=b.nc;c=0;var g;do g=Y(this,"uchar"),c++;while(200>c&&10!=g);Y(this,"uchar");e=Y(this,"uint");c=Y(this,"uint");var h=Y(this,"float",3*e);g=Y(this,"uint",3*c);var j=new Uint32Array(e),k=new Float32Array(9*c);b.i=d=new T(9*c);b.j=e=new T(9*c);var l;for(l=0;l<c;l++){var p=3*l,u=g[p],v=g[p+1],x=g[p+2];f.push(u);f.push(v);f.push(x);j[u]+=1;j[v]+=1;j[x]+=1;var p=3*u,z=3*v,C=3*x,E=h[p],A=h[p+1],B=h[p+2],v=h[z],
x=h[z+1],u=h[z+2],H=h[C],I=h[C+1],N=h[C+2];d.add(E,A,B);d.add(v,x,u);d.add(H,I,N);E=new S(E,A,B);H=new S(H,I,N);v=(new S(v,x,u)).h().na(E);x=H.h().na(E);v=zc(v,x).normalize();k[p]+=v.x;k[p+1]+=v.y;k[p+2]+=v.b;k[z]+=v.x;k[z+1]+=v.y;k[z+2]+=v.b;k[C]+=v.x;k[C+1]+=v.y;k[C+2]+=v.b}for(l=0;l<c;l++)p=3*l,u=g[p],v=g[p+1],x=g[p+2],p=3*u,z=3*v,C=3*x,f=new S(k[z],k[z+1],k[z+2]),h=new S(k[C],k[C+1],k[C+2]),p=(new S(k[p],k[p+1],k[p+2])).scale(1/j[u]).normalize(),f=f.scale(1/j[v]).normalize(),h=h.scale(1/j[x]).normalize(),
e.add(p.x,p.y,p.b),e.add(f.x,f.y,f.b),e.add(h.x,h.y,h.b);b.la=Oc;L.ta(this.c+".parse");c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};F("X.parserFSM",Ie);F("X.parserFSM.prototype.parse",Ie.prototype.parse);var Je={ue:function(a,b,c){return Je.update(a,0,b,c)},update:function(a,b,c,d){var e=Je.yg,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}};
Je.yg=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Ke(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,j,k,l,p,u;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(j=2;g<=c;){for(p=0;p<b;++p)if(a[p]===g){k=0;l=h;for(u=0;u<g;++u)k=k<<1|l&1,l>>=1;for(u=k;u<e;u+=j)f[u]=g<<16|p;++h}++g;h<<=1;j<<=1}return[f,c,d]};function Le(a,b){this.re=[];this.se=32768;this.Oa=this.Rc=this.ia=this.Ze=0;this.input=new Uint8Array(a);this.Bf=s;this.te=Me;this.ob=s;if(b||!(b={}))b.index&&(this.ia=b.index),b.bufferSize&&(this.se=b.bufferSize),b.bufferType&&(this.te=b.bufferType),b.resize&&(this.ob=b.resize);switch(this.te){case Ne:this.P=32768;this.Aa=new Uint8Array(32768+this.se+258);break;case Me:this.P=0;this.Aa=new Uint8Array(this.se);this.ac=this.dh;this.Ef=this.Tg;this.Ae=this.Xg;break;default:m(Error("invalid inflate mode"))}}
var Ne=0,Me=1;
Le.prototype.Uc=function(){for(;!this.Bf;){var a=Oe(this,3);a&1&&(this.Bf=q);a>>>=1;switch(a){case 0:var a=this.input,b=this.ia,c=this.Aa,d=this.P,e=n,f=n,g=n,h=c.length,e=n;this.Oa=this.Rc=0;e=a[b++];e===n&&m(Error("invalid uncompressed block header: LEN (first byte)"));f=e;e=a[b++];e===n&&m(Error("invalid uncompressed block header: LEN (second byte)"));f|=e<<8;e=a[b++];e===n&&m(Error("invalid uncompressed block header: NLEN (first byte)"));g=e;e=a[b++];e===n&&m(Error("invalid uncompressed block header: NLEN (second byte)"));g|=
e<<8;f===~g&&m(Error("invalid uncompressed block header: length verify"));b+f>a.length&&m(Error("input buffer is broken"));switch(this.te){case Ne:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.P=d,c=this.ac(),d=this.P;break;case Me:for(;d+f>c.length;)c=this.ac({Kf:2});break;default:m(Error("invalid inflate mode"))}c.set(a.subarray(b,b+f),d);d+=f;this.ia=b+=f;this.P=d;this.Aa=c;break;case 1:this.Ae(Pe,Qe);break;case 2:Re(this);break;default:m(Error("unknown BTYPE: "+a))}}return this.Ef()};
var Se=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Ue=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Ve=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),We=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Xe=new Uint8Array(288),
Ye,Ze;Ye=0;for(Ze=Xe.length;Ye<Ze;++Ye)Xe[Ye]=143>=Ye?8:255>=Ye?9:279>=Ye?7:8;var Pe=Ke(Xe),$e=new Uint8Array(30),af,bf;af=0;for(bf=$e.length;af<bf;++af)$e[af]=5;var Qe=Ke($e);function Oe(a,b){for(var c=a.Rc,d=a.Oa,e=a.input,f=a.ia,g;d<b;)g=e[f++],g===n&&m(Error("input buffer is broken")),c|=g<<d,d+=8;g=c&(1<<b)-1;a.Rc=c>>>b;a.Oa=d-b;a.ia=f;return g}
function cf(a,b){for(var c=a.Rc,d=a.Oa,e=a.input,f=a.ia,g=b[0],h=b[1],j;d<h;)j=e[f++],j===n&&m(Error("input buffer is broken")),c|=j<<d,d+=8;e=g[c&(1<<h)-1];g=e>>>16;a.Rc=c>>g;a.Oa=d-g;a.ia=f;return e&65535}
function Re(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=cf(this,b),d){case 16:for(d=3+Oe(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Oe(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Oe(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Oe(a,5)+257,d=Oe(a,5)+1,e=Oe(a,4)+4,f=new Uint8Array(Se.length),g;for(g=0;g<e;++g)f[Se[g]]=Oe(a,3);e=Ke(f);f=new Uint8Array(c);g=new Uint8Array(d);a.Ae(Ke(b.call(a,c,e,f)),Ke(b.call(a,d,e,g)))}w=Le.prototype;
w.Ae=function(a,b){var c=this.Aa,d=this.P;this.Hf=a;for(var e=c.length-258,f,g,h;256!==(f=cf(this,a));)if(256>f)d>=e&&(this.P=d,c=this.ac(),d=this.P),c[d++]=f;else{f-=257;h=Te[f];0<Ue[f]&&(h+=Oe(this,Ue[f]));f=cf(this,b);g=Ve[f];0<We[f]&&(g+=Oe(this,We[f]));d>=e&&(this.P=d,c=this.ac(),d=this.P);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Oa;)this.Oa-=8,this.ia--;this.P=d};
w.Xg=function(a,b){var c=this.Aa,d=this.P;this.Hf=a;for(var e=c.length,f,g,h;256!==(f=cf(this,a));)if(256>f)d>=e&&(c=this.ac(),e=c.length),c[d++]=f;else{f-=257;h=Te[f];0<Ue[f]&&(h+=Oe(this,Ue[f]));f=cf(this,b);g=Ve[f];0<We[f]&&(g+=Oe(this,We[f]));d+h>e&&(c=this.ac(),e=c.length);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Oa;)this.Oa-=8,this.ia--;this.P=d};
w.ac=function(){var a=new Uint8Array(this.P-32768),b=this.P-32768,c=this.Aa;a.set(c.subarray(32768,a.length));this.re.push(a);this.Ze+=a.length;c.set(c.subarray(b,b+32768));this.P=32768;return c};w.dh=function(a){var b=this.input.length/this.ia+1|0,c=this.input,d=this.Aa;a&&("number"===typeof a.Kf&&(b=a.Kf),"number"===typeof a.Mg&&(b+=a.Mg));2>b?(a=(c.length-this.ia)/this.Hf[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.Aa=a};
w.Ef=function(){var a=0,b=this.Aa,c=this.re,d,e=new Uint8Array(this.Ze+(this.P-32768)),f,g,h,j;if(0===c.length)return this.Aa.subarray(32768,this.P);f=0;for(g=c.length;f<g;++f){d=c[f];h=0;for(j=d.length;h<j;++h)e[a++]=d[h]}f=32768;for(g=this.P;f<g;++f)e[a++]=b[f];this.re=[];return this.buffer=e};w.Tg=function(){var a,b=this.P;this.ob?(a=new Uint8Array(b),a.set(this.Aa.subarray(0,b))):a=this.Aa.subarray(0,b);return this.buffer=a};new Uint8Array(256);var df;for(df=0;256>df;++df)for(var ef=df,ff=7,ef=ef>>>1;ef;ef>>>=1)--ff;var gf=[],hf;for(hf=0;288>hf;hf++)switch(q){case 143>=hf:gf.push([hf+48,8]);break;case 255>=hf:gf.push([hf-144+400,9]);break;case 279>=hf:gf.push([hf-256+0,7]);break;case 287>=hf:gf.push([hf-280+192,8]);break;default:m("invalid literal: "+hf)}
function jf(){var a=kf;switch(q){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-
31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:m("invalid length: "+a)}}var lf=[],kf,mf;
for(kf=3;258>=kf;kf++)mf=jf(),lf[kf]=mf[2]<<24|mf[1]<<16|mf[0];new Uint32Array(lf);function nf(){};function of(a){this.input=a;this.ia=0;this.member=[]}
of.prototype.Uc=function(){for(var a=this.input.length;this.ia<a;){var b=new nf,c=n,d=n,e=n,f=c=e=n,g=n,c=c=n,h=this.input,d=this.ia;b.Qf=h[d++];b.Rf=h[d++];(31!==b.Qf||139!==b.Rf)&&m(Error("invalid file signature:",b.Qf,b.Rf));b.Df=h[d++];switch(b.Df){case 8:break;default:m(Error("unknown compression method: "+b.Df))}b.zd=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.Zj=new Date(1E3*c);b.ck=h[d++];b.$j=h[d++];0<(b.zd&4)&&(b.Vi=h[d++]|h[d++]<<8,d+=b.Vi);if(0<(b.zd&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=
String.fromCharCode(c);b.name=g.join("")}if(0<(b.zd&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}0<(b.zd&2)&&(b.Ug=Je.ue(h,0,d)&65535,b.Ug!==(h[d++]|h[d++]<<8)&&m(Error("invalid header crc16")));c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Le(h,{index:d,bufferSize:e});b.data=e=d.Uc();d=d.ia;b.Rj=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;Je.ue(e)!==c&&m(Error("invalid CRC-32 checksum: 0x"+Je.ue(e).toString(16)+
" / 0x"+c.toString(16)));b.Wj=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;(e.length&4294967295)!==c&&m(Error("invalid input size: "+(e.length&4294967295)+" / "+c));this.member.push(b);this.ia=d}a=this.member;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function pf(){me.call(this);this.c="parserMGZ";this.gd=s}G(pf,me);pf.prototype.parse=function(a,b,c,d){L.Ga(this.c+".parse");d&&(c=(new of(new Uint8Array(c))).Uc(),c=c.buffer);d=this.Zc(c);b.R=[d.He,d.Ie,d.Je];b.J=d.rg;c=d.min;var e=d.max;b.Ka=b.X=c;b.Ha=b.W=e;-Infinity==b.S&&(b.S=c);Infinity==b.V&&(b.V=e);b.uc();L.ta(this.c+".parse");b.sb=pe(this,b,d);d=new Rc;d.aa=b;d.u=a;this.dispatchEvent(d)};
pf.prototype.Zc=function(a){this.$=a;a={version:0,Bg:0,zg:0,jh:0,Ag:0,He:0,Ie:0,Je:0,Kh:0,type:0,ah:0,og:0,aj:r,xg:r,rg:r,data:r,min:Infinity,max:-Infinity};a.version=Y(this,"uint");a.He=Y(this,"uint");a.Ie=Y(this,"uint");a.Je=Y(this,"uint");a.Kh=Y(this,"uint");a.type=Y(this,"uint");a.ah=Y(this,"uint");a.og=Y(this,"ushort");if(0<a.og){a.rg=Y(this,"float",3);var b=[];b.push(Y(this,"float",3));b.push(Y(this,"float",3));b.push(Y(this,"float",3));b.push(Y(this,"float",3));a.xg=b}this.F=284;b=a.He*a.Ie*
a.Je;switch(a.type){case 0:a.data=Y(this,"uchar",b);break;case 1:a.data=Y(this,"uint",b);break;case 3:a.data=Y(this,"float",b);break;case 4:a.data=Y(this,"ushort",b);break;default:m(Error("Unsupported MGH/MGZ data type: "+a.type))}b=ne(a.data);a.min=b[0];a.max=b[1];this.F+16<this.$.byteLength&&(a.Bg=Y(this,"float"),a.jh=Y(this,"float"),a.zg=Y(this,"float"),a.Ag=Y(this,"float"));return a};F("X.parserMGZ",pf);F("X.parserMGZ.prototype.parse",pf.prototype.parse);function qf(){me.call(this);this.c="parserLBL"}G(qf,me);
qf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");var d=b.nc,e=d.length;0==e&&m(Error("No _pointIndices defined on the X.object."));this.$=c;var f=[],g=Y(this,"uchar",c.byteLength),h=g.length,j=s,k=0;for(c=1;c<h;c++)10==g[c-1]?(k=c,j=q):j&&32==g[c]&&(f.push(parseInt(oe(g,k,c),10)),j=s);g=b.v.t?b.v.t:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++)j=d[c],j>e&&m(Error("Could not find scalar for vertex.")),j=g[j],f[h++]=j,f[h++]=j,f[h++]=j;b.v.t=
g;b.v.zc=f;b.v.f=q;L.ta(this.c+".parse");d=new Rc;d.aa=b;d.u=a;this.dispatchEvent(d)};F("X.parserLBL",qf);F("X.parserLBL.prototype.parse",qf.prototype.parse);function rf(){me.call(this);this.c="parserCRV";this.gd=s}G(rf,me);
rf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");var d=b.nc;0==d.length&&m(Error("No _pointIndices defined on the X.object."));this.$=c;this.F=3;var e=Y(this,"uint");Y(this,"uint");Y(this,"uint");var f=0,g=0,h=0,j=0,k=0,l=0,p=0,u=0,v=0,x=0,z=0;c=Array(2);var C=Array(2),E=Y(this,"float",e),A;for(A=0;A<e;A++){var B=E[A];0==A&&(c[0]=C[0]=B);0<=B?(f++,j+=B):(g++,h+=B);v+=B;z++;C[0]=Math.max(B,C[0]);c[0]=Math.min(B,c[0]);E[A]=B}0!=f&&(k=j/f);0!=g&&(l=h/g);0!=z&&(x=v/z);for(z=v=h=j=0;z<e;z++)B=
E[z],A=0,0<=B?(A=Math.pow(B-k,2),j+=A):(A=Math.pow(B-l,2),h+=A),A=Math.pow(B-x,2),v+=A;1<f&&(p=Math.sqrt(j/(f-1)));1<g&&(u=Math.sqrt(h/(g-1)));c[1]=l-2.5*u;C[1]=k+2.5*p;e=d.length;f=new Float32Array(3*e);for(z=0;z<e;z++)g=E[d[z]],h=3*z,f[h]=g,f[h+1]=g,f[h+2]=g;b.v.Ka=c[1];b.v.Ha=C[1];-Infinity==b.v.S&&(b.v.S=c[1]);Infinity==b.v.V&&(b.v.V=C[1]);b.v.t=E;b.v.zc=f;b.v.f=q;L.ta(this.c+".parse");d=new Rc;d.aa=b;d.u=a;this.dispatchEvent(d)};F("X.parserCRV",rf);F("X.parserCRV.prototype.parse",rf.prototype.parse);function sf(){me.call(this);this.c="parserTRK"}G(sf,me);
sf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");var d=b.i,e=b.j,f=b.Z;this.$=c;Y(this,"uchar",6);Y(this,"ushort",3);var g=Y(this,"float",3);Y(this,"float",3);var h=Y(this,"ushort");Y(this,"uchar",200);Y(this,"ushort");Y(this,"uchar",200);Y(this,"float",16);Y(this,"uchar",444);Y(this,"uchar",4);Y(this,"uchar",4);Y(this,"float",6);Y(this,"uchar",2);Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");var j=Y(this,"uint");Y(this,"uint");var k=Y(this,
"uint"),l=[],p=[];c=Infinity;var u=-Infinity,v=r,x=r,z=r,C=r,e=d=r,E=Y(this,"uint",(this.$.byteLength-1E3)/4);this.F=k;for(var A=Y(this,"float",(this.$.byteLength-1E3)/4),B=0,k=f=0;k<j;k++){for(var H=E[B],I=new T(3*H),N=0,J=0;J<H;J++){var K=A[B+3*J+J*h+1],O=A[B+3*J+J*h+2],aa=A[B+3*J+J*h+3],K=K/g[0],O=O/g[1],aa=aa/g[2];I.add(K,O,aa);if(0<J)var ca=I.get(J-1),N=N+Math.sqrt(Math.pow(K-ca[0],2)+Math.pow(O-ca[1],2)+Math.pow(aa-ca[2],2));J<H-1&&(f+=6)}B+=3*H+H*h+1;J=I.Tb;H=I.Qb;K=I.Ub;O=I.Rb;aa=I.Vb;ca=
I.Sb;if(!v||J<v)v=J;if(!x||H>x)x=H;if(!z||K<z)z=K;if(!C||O>C)C=O;if(!d||aa<d)d=aa;if(!e||ca>e)e=ca;l.push(I);p.push(N)}g=(v+x)/2;z=(z+C)/2;h=(d+e)/2;C=new Float32Array(f);b.i=d=new T(f);b.j=e=new T(f);b.Z=f=new T(f);for(k=v=0;k<j;k++){x=l[k];E=x.count;N=p[k];c=Math.min(c,N);u=Math.max(u,N);for(J=0;J<E-1;J++){B=x.get(J);A=x.get(J+1);d.add(B[0],B[1],B[2]);d.add(A[0],A[1],A[2]);var I=B[0]-g,H=B[1]-z,K=B[2]-h,O=Math.sqrt(I*I+H*H+K*K),aa=A[0]-g,ca=A[1]-z,W=A[2]-h,da=Math.sqrt(aa*aa+ca*ca+W*W);e.add(I/
O,H/O,K/O);e.add(aa/da,ca/da,W/da);A=[Math.abs(A[0]-B[0]),Math.abs(A[1]-B[1]),Math.abs(A[2]-B[2])];B=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);A[0]/=B;A[1]/=B;A[2]/=B;f.add(A[0],A[1],A[2]);f.add(A[0],A[1],A[2]);C[v++]=N;C[v++]=N;C[v++]=N;C[v++]=N;C[v++]=N;C[v++]=N}}b.la="LINES";j=new Qc;j.Ka=c;j.Ha=u;j.S=c;j.V=u;j.zc=C;j.wf=s;j.f=q;b.v=j;L.ta(this.c+".parse");c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};F("X.parserTRK",sf);F("X.parserTRK.prototype.parse",sf.prototype.parse);function tf(){me.call(this);this.c="parserLUT"}G(tf,me);
tf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");this.$=c;c=Y(this,"uchar",c.byteLength);var d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=oe(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}L.ta(this.c+".parse");c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};
F("X.parserLUT",tf);F("X.parserLUT.prototype.parse",tf.prototype.parse);function uf(){me.call(this);this.c="parserNRRD"}G(uf,me);
uf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");this.$=c;c=Y(this,"uchar",c.byteLength);var d=c.length,e=r,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=oe(c,0,g-2);f=g+1;break}var h,j,k,l,d=e.split(/\r?\n/),e=0;for(g=d.length;e<g;e++)if(h=d[e],h.match(/NRRD\d+/))this.Ch=q;else if(!h.match(/^#/)&&(l=h.match(/(.*):(.*)/)))j=l[1].trim(),h=l[2].trim(),(k=this.fh[j])?k.call(this,h):this[j]=h;this.Ch||m(Error("Not an NRRD file"));"raw"!==this.encoding&&("gzip"!==this.encoding&&"gz"!==this.encoding)&&
m(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Ia&&(this.Ia=[new S(1,0,0),new S(0,1,0),new S(0,0,1)],this.Xe)){d=[];for(l=0;2>=l;l++)d.push(!isNaN(this.Xe[l])?this.Ia[l].scale(this.Xe[l]):n)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new of(new Uint8Array(f))).Uc();f=f.buffer;c={data:r,min:Infinity,max:-Infinity};c.data=new this.Mb(f);l=ne(c.data);f=c.min=l[0];l=c.max=l[1];b.R=[this.Ue[0],this.Ue[1],this.Ue[2]];d=(new S(this.Ia[0][0],this.Ia[0][1],this.Ia[0][2])).nb();
e=(new S(this.Ia[1][0],this.Ia[1][1],this.Ia[1][2])).nb();g=(new S(this.Ia[2][0],this.Ia[2][1],this.Ia[2][2])).nb();b.J=[d,e,g];b.Ka=b.X=f;b.Ha=b.W=l;-Infinity==b.S&&(b.S=f);Infinity==b.V&&(b.V=l);b.uc();L.ta(this.c+".parse");b.sb=pe(this,b,c);c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};
uf.prototype.fh={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Mb=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Mb=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Mb=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Mb=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Mb=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Mb=Uint32Array;break;case "float":this.Mb=Float32Array;break;default:m(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return this.Uj=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.za=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Ue=e},"space directions":function(a){var b,
c;a=a.match(/\(.*?\)/g);var d,e,f;f=[];d=0;for(e=a.length;d<e;d++)c=a[d],f.push(function(){var a,d,e,f;e=c.slice(1,-1).split(/,/);f=[];a=0;for(d=e.length;a<d;a++)b=e[a],f.push(parseFloat(b));return f}());return this.Ia=f},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Xe=e}};F("X.parserNRRD",uf);F("X.parserNRRD.prototype.parse",uf.prototype.parse);function vf(){me.call(this);this.c="parserNII"}G(vf,me);
vf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,q);348!=e&&(d=(new of(new Uint8Array(d))).Uc(),d=d.buffer);c=this.Zc(d);b.R=[c.za[1],c.za[2],c.za[3]];b.J=[c.ma[1],c.ma[2],c.ma[3]];d=c.min;e=c.max;b.Ka=b.X=d;b.Ha=b.W=e;-Infinity==b.S&&(b.S=d);Infinity==b.V&&(b.V=e);b.uc();L.ta(this.c+".parse");b.sb=pe(this,b,c);c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};
vf.prototype.Zc=function(a){this.$=a;a={Fi:0,Vg:r,Wg:r,eh:0,Ci:0,wi:0,$g:r,za:r,yh:0,zh:0,Ah:0,wh:0,ze:0,Pg:0,Ji:0,ma:r,sg:0,Bi:0,Ai:0,Ii:0,Gi:r,Wi:r,Rg:0,Sg:0,Hi:0,Qi:0,lh:0,mh:0,Yg:r,Og:r,pi:0,Di:0,ti:0,ui:0,vi:0,qi:0,ri:0,si:0,Ki:r,Li:r,Mi:r,xh:r,Eh:r,data:r,min:Infinity,max:-Infinity};a.Fi=Y(this,"uint");a.Vg=Y(this,"uchar",10);a.Wg=Y(this,"uchar",18);a.eh=Y(this,"uint");a.Ci=Y(this,"ushort");a.wi=Y(this,"uchar");a.$g=Y(this,"uchar");a.za=Y(this,"ushort",8);a.yh=Y(this,"float");a.zh=Y(this,"float");
a.Ah=Y(this,"float");a.wh=Y(this,"ushort");a.ze=Y(this,"ushort");a.Pg=Y(this,"ushort");a.Ji=Y(this,"ushort");a.ma=Y(this,"float",8);a.sg=Y(this,"float");a.Bi=Y(this,"float");a.Ai=Y(this,"float");a.Ii=Y(this,"ushort");a.Gi=Y(this,"uchar");a.Wi=Y(this,"uchar");a.Rg=Y(this,"float");a.Sg=Y(this,"float");a.Hi=Y(this,"float");a.Qi=Y(this,"float");a.lh=Y(this,"uint",1);a.mh=Y(this,"uint",1);a.Yg=Y(this,"uchar",80);a.Og=Y(this,"uchar",24);a.pi=Y(this,"ushort");a.Di=Y(this,"ushort");a.ti=Y(this,"float");a.ui=
Y(this,"float");a.vi=Y(this,"float");a.qi=Y(this,"float");a.ri=Y(this,"float");a.si=Y(this,"float");a.Ki=Y(this,"float",4);a.Li=Y(this,"float",4);a.Mi=Y(this,"float",4);a.xh=Y(this,"uchar",16);a.Eh=Y(this,"uchar",4);this.F=parseInt(a.sg,10);var b=a.za[1]*a.za[2]*a.za[3];switch(a.ze){case 2:a.data=Y(this,"uchar",b);break;case 4:a.data=Y(this,"sshort",b);break;case 8:a.data=Y(this,"sint",b);break;case 16:a.data=Y(this,"float",b);break;case 256:a.data=Y(this,"schar",b);break;case 512:a.data=Y(this,"ushort",
b);break;case 768:a.data=Y(this,"uint",b);break;default:m(Error("Unsupported NII data type: "+a.ze))}b=ne(a.data);a.min=b[0];a.max=b[1];return a};F("X.parserNII",vf);F("X.parserNII.prototype.parse",vf.prototype.parse);function wf(){me.call(this);this.c="parserOBJ"}G(wf,me);
wf.prototype.parse=function(a,b,c){L.Ga(this.c+".parse");this.$=c;c=c.byteLength;var d=Y(this,"uchar",c),e=[];b.i=new T(c);b.j=new T(c);var f=b.i,g=b.j,h=0,j;for(j=0;j<c;++j)if(10==d[j]){var k=oe(d,h,j).replace(/\s{2,}/g," ").split(" ");if("v"==k[0])e.push([parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])]);else if("f"==k[0]){var l=e[parseInt(k[1],10)-1],h=e[parseInt(k[2],10)-1],k=e[parseInt(k[3],10)-1];f.add(l[0],l[1],l[2]);f.add(h[0],h[1],h[2]);f.add(k[0],k[1],k[2]);l=new S(l[0],l[1],l[2]);k=
new S(k[0],k[1],k[2]);h=zc((new S(h[0],h[1],h[2])).na(l),k.na(l));h.normalize();g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b)}h=j+1}L.ta(this.c+".parse");c=new Rc;c.aa=b;c.u=a;this.dispatchEvent(c)};F("X.parserOBJ",wf);F("X.parserOBJ.prototype.parse",wf.prototype.parse);function xf(){Q.call(this);this.c="loader";this.lc=new rc;this.Nc=0}G(xf,Q);function yf(a,b){a.Nc+=b/a.lc.Ad()/3;a.Nc=Math.min(1,a.Nc);var c=new od;c.zf=a.Nc;a.dispatchEvent(c)}function zf(a){a=a.o.md;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");b in Af||m(Error("The "+b+" file format is not supported."));return[a,b,Af[b][0],Af[b][1],Af[b][2]]}
xf.prototype.load=function(a,b){(!a||!b)&&m(Error("No container or object to load."));if(!uc(this.lc.L,a.ea)||this.lc.get(a.ea)){this.lc.set(a.ea,s);var c=zf(a)[0];if(a.eb!=r)this.parse(r,a,b);else{var d=new XMLHttpRequest;P(d,"abort",this.Jf.bind(this,d,a,b));P(d,"error",this.Jf.bind(this,d,a,b));P(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,q);d.responseType="arraybuffer";d.send(r)}}};
xf.prototype.parse=function(a,b,c){yf(this,1);setTimeout(function(){var d=zf(b),e=d[3],d=new d[2];Ub(d,cd,this.complete.bind(this));var f=b.eb;f==r&&(f=a.response,b.eb=f);d.parse(b,c,f,e)}.bind(this),100)};xf.prototype.complete=function(a){yf(this,1);setTimeout(function(){var b=a.u,c=a.aa;b.o.f=s;b.f=q;c.n();this.lc.set(b.ea,q)}.bind(this),100)};xf.prototype.Jf=function(a,b,c){m(Error("Loading failed: ",b,c))};
var Af={OBJ:[wf,r],STL:[Ee,r],VTK:[Ge,r],TRK:[sf,r],FSM:[Ie,r],INFLATED:[Ie,r],SMOOTHWM:[Ie,r],SPHERE:[Ie,r],PIAL:[Ie,r],ORIG:[Ie,r],NRRD:[uf,r],NII:[vf,r],GZ:[vf,r],DCM:[Fe,r],DICOM:[Fe,r],"":[Fe,r],CRV:[rf,r],LABEL:[qf,r],MGH:[pf,s],MGZ:[pf,q],TXT:[tf,r],LUT:[tf,r],PNG:[we,"png"],JPG:[we,"jpeg"],JPEG:[we,"jpeg"],GIF:[we,"gif"]};function Bf(a){function b(a,b,d){b=2*b*Math.PI;b=za(Aa(j,Math.cos(b)),Aa(k,Math.sin(b)));a=za(za(c,Aa(e,a)),Aa(b,f));d=za(Aa(b,1-Math.abs(d)),Aa(g,d));return new cc(a,d)}this.C=[];a=a||{};var c=new ya(a.start||[0,-1,0]),d=new ya(a.end||[0,1,0]),e=Ba(d,c),f=a.$a||1;a=a.Ve||16;for(var g=Ca(e),h=0.5<Math.abs(g.y()),j=Ca((new ya(h,!h,0)).$b(g)),k=Ca(j.$b(g)),h=new cc(c,Da(g)),d=new cc(d,Ca(g)),l=[],p=0;p<a;p++){var u=p/a,v=(p+1)/a;l.push(new ec([h,b(0,u,-1),b(0,v,-1)]));l.push(new ec([b(0,v,0),b(0,u,
0),b(1,u,0),b(1,v,0)]));l.push(new ec([d,b(1,v,1),b(1,u,1)]))}return mc(l)}G(Bf,lc);function Cf(){U.call(this);this.c="cylinder";this.me=[-10,-10,-10];this.Xd=[10,10,10];this.Wb=10;this.Xb=32;Ea(this,new Tc)}G(Cf,U);Cf.prototype.__defineGetter__("start",t("me"));Cf.prototype.__defineSetter__("start",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid start"));this.me=a});Cf.prototype.__defineGetter__("end",t("Xd"));Cf.prototype.__defineSetter__("end",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid end"));this.Xd=a});Cf.prototype.__defineGetter__("radius",t("Wb"));
Cf.prototype.__defineSetter__("radius",function(a){D(a)||m(Error("Invalid radius."));this.Wb=a});Cf.prototype.n=function(){Vc(this,new Bf({start:this.me,end:this.Xd,$a:this.Wb,Ve:this.Xb}));Cf.r.n.call(this)};F("X.cylinder",Cf);F("X.cylinder.prototype.modified",Cf.prototype.n);function Df(a){function b(a,b){a*=2*Math.PI;b*=Math.PI;var e=new ya(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new cc(za(c,Aa(e,d)),e))}this.C=[];a=a||{};var c=new ya(a.ve||[0,0,0]),d=a.$a||1,e=a.Ve||16;a=a.Ni||8;for(var f=[],g=[],h=0;h<e;h++)for(var j=0;j<a;j++)g=[],b(h/e,j/a),0<j&&b((h+1)/e,j/a),j<a-1&&b((h+1)/e,(j+1)/a),b(h/e,(j+1)/a),f.push(new ec(g));return mc(f)}G(Df,lc);function Ef(){U.call(this);this.c="sphere";this.k=[0,0,0];this.Wb=5;this.Xb=32;this.Ig=16;Ea(this,new Tc)}G(Ef,U);Ef.prototype.__defineGetter__("center",t("k"));Ef.prototype.__defineSetter__("center",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid center"));this.k=a});Ef.prototype.__defineGetter__("radius",t("Wb"));Ef.prototype.__defineSetter__("radius",function(a){D(a)||m(Error("Invalid radius."));this.Wb=a});
Ef.prototype.n=function(){Vc(this,new Df({ve:this.k,$a:this.Wb,Ve:this.Xb,Ni:this.Ig}));Ef.r.n.call(this)};F("X.sphere",Ef);F("X.sphere.prototype.modified",Ef.prototype.n);function De(a){R.call(this);this.c="labelmap";this.jb=a;this.le=new Float32Array([-255,-255,-255,-255])}G(De,R);De.prototype.n=function(){var a=new Rc;a.aa=this;this.dispatchEvent(a);this.jb.n()};De.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];a!=r&&(y(a)&&4==a.length?b=a:(this.Q||m(Error("No colortable assigned.")),b=this.Q.fb.get(a).slice(1,5)));this.le=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
F("X.labelmap",De);function Ff(a){this.C=[];a=a||{};var b=new ya(a.ve||[0,0,0]),c=!a.$a?[1,1,1]:a.$a.length?a.$a:[a.$a,a.$a,a.$a];return mc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new ec(a[0].map(function(e){e=new ya(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new cc(e,new ya(a[1]))}))}))}G(Ff,lc);function Gf(){U.call(this);this.c="cube";this.k=[0,0,0];this.de=this.ce=this.be=20;this.Fb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ea(this,new Tc)}G(Gf,U);Gf.prototype.__defineGetter__("center",t("k"));Gf.prototype.__defineSetter__("center",function(a){(a==r||!y(a)||3!=a.length)&&m(Error("Invalid center"));this.k=a});Gf.prototype.__defineGetter__("lengthX",t("be"));
Gf.prototype.__defineSetter__("lengthX",function(a){D(a)||m(Error("Invalid lengthX."));this.be=a});Gf.prototype.__defineGetter__("lengthY",t("ce"));Gf.prototype.__defineSetter__("lengthY",function(a){D(a)||m(Error("Invalid lengthY."));this.ce=a});Gf.prototype.__defineGetter__("lengthZ",t("de"));Gf.prototype.__defineSetter__("lengthZ",function(a){D(a)||m(Error("Invalid lengthZ."));this.de=a});Gf.prototype.n=function(){Vc(this,new Ff({ve:this.k,$a:[this.be/2,this.ce/2,this.de/2]}));Gf.r.n.call(this)};
F("X.cube",Gf);F("X.cube.prototype.modified",Gf.prototype.n);function he(a){fe.call(this,a);this.c="interactor3D";this.Lj=s}G(he,fe);he.prototype.Xc=function(a){he.r.Xc.call(this,a);var b=new jd;a.vc==r&&(a.vc=0);b.Ta=0>a.vc;b.Ja=q;this.dispatchEvent(b)};function Hf(a){Q.call(this);this.c="array";this.t=[];this.ef=a}G(Hf,Q);function If(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return s;return q}Hf.prototype.add=function(a){this.t.push(a);return q};Hf.prototype.remove=function(a){a=this.t.indexOf(a);-1<a&&this.t.splice(a,1);return q};Hf.prototype.clear=function(){this.t.length=0};
function Jf(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Jf(a,b,d);for(Jf(a,d,c);b<d;++b)if(0<a.ef(a.t[b],a.t[d])){var e=a.t[b];a.t[b]=a.t[d];for(var f=a,g=d,h=c;g+1<h&&0>f.ef(f.t[g+1],e);){var j=f,k=g+1,l=j.t[g];j.t[g]=j.t[k];j.t[k]=l;++g}f.t[g]=e}}}Hf.prototype.sort=function(){Jf(this,0,this.t.length)};function Kf(a){Jb.call(this);this.mb=a;this.A=[]}G(Kf,Jb);var Lf=[];function Mf(a,b,c,d,e){y(c)||(Lf[0]=c,c=Lf);for(var f=0;f<c.length;f++){var g=P(b,c[f],d||a,e||s,a.mb||a);a.A.push(g)}}Kf.prototype.Re=function(){Eb(this.A,Wb);this.A.length=0};Kf.prototype.handleEvent=function(){m(Error("EventHandler.handleEvent not implemented"))};function Nf(){}Nf.Lf=function(){return Nf.Tf?Nf.Tf:Nf.Tf=new Nf};Nf.prototype.Jh=0;Nf.Lf();function Of(a){bc.call(this);this.Ib=a||zd();this.yi=Pf}G(Of,bc);Of.prototype.uh=Nf.Lf();var Pf=r;w=Of.prototype;w.Sf=r;w.xc=s;w.s=r;w.yi=r;w.Yc=r;w.Sc=r;w.we=r;w.m=t("s");w.Te=function(a){this.Yc&&this.Yc!=a&&m(Error("Method not supported"));Of.r.Te.call(this,a)};w.Bd=t("Ib");w.tc=function(){this.s=this.Ib.createElement("div")};w.ec=function(a){this.Lb(a)};
w.Lb=function(a,b){this.xc&&m(Error("Component already rendered"));this.s||this.tc();a?a.insertBefore(this.s,b||r):this.Ib.O.body.appendChild(this.s);(!this.Yc||this.Yc.xc)&&this.xd()};w.xd=function(){function a(a){!a.xc&&a.m()&&a.xd()}this.xc=q;this.Sc&&Eb(this.Sc,a,n)};w.yd=function(){function a(a){a.xc&&a.yd()}this.Sc&&Eb(this.Sc,a,n);this.nh&&this.nh.Re();this.xc=s};
w.removeChild=function(a,b){if(a){var c=ma(a)?a:a.Sf||(a.Sf=":"+(a.uh.Jh++).toString(36)),d;this.we&&c?(d=this.we,d=(c in d?d[c]:n)||r):d=r;a=d;c&&a&&(d=this.we,c in d&&delete d[c],Hb(this.Sc,a),b&&(a.yd(),a.s&&Gd(a.s)),c=a,c==r&&m(Error("Unable to set parent component")),c.Yc=r,Of.r.Te.call(c,r))}a||m(Error("Child is not in parent component"));return a};function Rf(){bc.call(this)}G(Rf,bc);w=Rf.prototype;w.af=0;w.Wc=0;w.Ge=100;w.If=0;w.Ye=1;w.Bh=s;w.Ih=s;w.Sd=function(a){a=Sf(this,a);this.af!=a&&(this.af=a+this.If>this.Ge?this.Ge-this.If:a<this.Wc?this.Wc:a,!this.Bh&&!this.Ih&&this.dispatchEvent("change"))};w.Ed=function(){return Sf(this,this.af)};w.Dd=function(){return Sf(this,this.Wc)};w.Cd=function(){return Sf(this,this.Ge)};function Sf(a,b){return a.Ye==r?b:a.Wc+Math.round((b-a.Wc)/a.Ye)*a.Ye};function Tf(a){Of.call(this,a);this.$c=new Rf;P(this.$c,"change",this.oh,s,this)}G(Tf,Of);var Uf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};w=Tf.prototype;w.tc=function(){this.ab=this.Bd().tc("div","progress-bar-thumb");var a=Uf[this.jg];this.s=this.Bd().tc("div",a,this.ab);Vf(this);a=this.Dd();this.m().setAttribute("aria-valuemin",a);a=this.Cd();this.m().setAttribute("aria-valuemax",a)};
w.xd=function(){Tf.r.xd.call(this);M&&7>pb&&P(this.m(),"resize",this.Vd,s,this);this.Vd();var a=this.m();a.setAttribute("role","progressbar");a.setAttribute("aria-live","polite")};w.yd=function(){Tf.r.yd.call(this);M&&7>pb&&Vb(this.m(),"resize",this.Vd,s,this)};w.Ed=function(){return this.$c.Ed()};w.Sd=function(a){this.$c.Sd(a);this.m()&&Vf(this)};function Vf(a){var b=a.Ed();a.m().setAttribute("aria-valuenow",b)}w.Dd=function(){return this.$c.Dd()};w.Cd=function(){return this.$c.Cd()};w.jg="horizontal";
w.oh=function(){this.Vd();this.dispatchEvent("change")};w.Vd=function(){if(this.ab){var a=this.Dd(),b=this.Cd(),a=(this.Ed()-a)/(b-a),b=Math.round(100*a);"vertical"==this.jg?M&&7>pb?(this.ab.style.top=0,this.ab.style.height="100%",b=this.ab.offsetHeight,a=Math.round(a*b),this.ab.style.top=b-a+"px",this.ab.style.height=a+"px"):(this.ab.style.top=100-b+"%",this.ab.style.height=b+"%"):this.ab.style.width=b+"%"}};function Wf(a,b){a==r&&m(Error("No valid parent element."));b==r&&m(Error("Invalid initial value."));Tf.call(this);this.c="progressbar";this.oa=a;this.sf="";this.dd=this.ib=r;this.Ob=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Ob=[c,d,e];this.Sd(b);this.Ce()}G(Wf,Tf);
Wf.prototype.Ce=function(){if("static"==this.oa.style.position||""==this.oa.style.position)this.sf=this.oa.style.position,this.oa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Ed("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Ob[0])),d=document.createTextNode(String(this.Ob[1])),e=document.createTextNode(String(this.Ob[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.ib=b;this.ec(this.oa);a=this.m();a.style.position=
"absolute";a.style.top=(this.oa.clientHeight-5)/2+"px";a.style.left=(this.oa.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function Xf(a){var b=a.m().style.top,c=a.m().style.left;Gd(a.m());var d=new Wf(a.oa,100),e=d.m();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=n?e.firstElementChild:Hd(e.firstChild)).classList.add("progress-bar-thumb-done");a.dd=d}
Wf.prototype.Gd=function(){this.ib&&Gd(this.ib);this.m()&&Gd(this.m());this.dd&&Gd(this.dd.m());this.dd=this.ib=r;this.oa.style.position=this.sf};function Yf(a,b,c){na(a)?c&&(a=va(a,c)):a&&"function"==typeof a.handleEvent?a=va(a.handleEvent,a):m(Error("Invalid listener argument"));return 2147483647<b?-1:fa.setTimeout(a,b||0)};function Zf(){Q.call(this);this.c="renderer";this.u=window.document.body;this.H=this.u.clientWidth;this.B=this.u.clientHeight;this.ja=this.q=this.da=r;this.Ya=new Hf(Sc);this.Ma=[];this.G=r;this.he=this.hd=this.jd=s;this.a=this.pa=r;this.D={PROGRESSBAR_ENABLED:q,INTERMEDIATE_RENDERING:s,SLICENAVIGATORS:q};this.cf=-1;window.console.log("XTK release 10 -- 2013-04-23 08:52:11 -- http://www.goXTK.com -- @goXTK")}G(Zf,Q);w=Zf.prototype;w.Yh=function(a){this.pa&&this.pa.Sd(100*a.zf)};
w.Oh=function(a){a!=r&&a instanceof Rc&&a.aa&&this.bb(a.aa)};w.Me=function(a){(a==r||!(a instanceof ld))&&m(Error("Invalid hover event."))};w.Ne=function(){var a=Cd(this.u);this.H=a.clientWidth;this.B=a.clientHeight;a=Cd(this.da);a.width=this.H;a.height=this.B;"renderer3D"==this.c&&(this.a.viewport(0,0,this.H,this.B),this.q.tf=L.d.Fe(L.d.Vc(),this.q.gf,this.da.width/this.da.height,1,1E4))};w.Oe=function(a){(a==r||!(a instanceof kd))&&m(Error("Invalid scroll event."))};
Zf.prototype.__defineGetter__("config",t("D"));Zf.prototype.__defineGetter__("interactor",t("ja"));Zf.prototype.__defineGetter__("camera",t("q"));Zf.prototype.__defineGetter__("loadingCompleted",t("hd"));Zf.prototype.__defineGetter__("container",t("u"));Zf.prototype.__defineSetter__("container",function(a){a==r&&m(Error("An ID to a valid container (<div>..) is required."));var b=a;ma(b)&&(b=Cd(a));oa(b)&&1==b.nodeType||m(Error("Could not find the given container."));this.u=b});w=Zf.prototype;
w.ad=function(){this.q.reset()};
w.ha=function(a){var b=Ed("canvas");this.u.appendChild(b);this.H=this.u.clientWidth;this.B=this.u.clientHeight;b.width=this.H;b.height=this.B;try{var c=b.getContext(a);c||m(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.u.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
m(Error(e))}this.G=new xf;P(this.G,dd,this.Yh.bind(this));this.da=b;this.a=c;b=new he(this.da);"2d"==a&&(b=new je(this.da));b.ha();P(b,ad,this.ad.bind(this));P(b,ed,this.Me.bind(this));P(b,$c,this.Oe.bind(this));this.ja=b;b=new le(this.H,this.B);"2d"==a&&(b=new xe(this.H,this.B));b.observe(this.ja);this.q=b;P(window,"resize",this.Ne,s,this)};w.add=function(a){(a instanceof Gf||a instanceof Ef||a instanceof Cf)&&a.n();this.Ma.push(a);this.bb(a)};
w.remove=function(a){(!this.da||!this.a)&&m(Error("The renderer was not initialized properly."));a==r&&m(Error("Illegal object."));return s};w.bb=function(a){(!this.da||!this.a)&&m(Error("The renderer was not initialized properly."));a==r&&(window.console.log(a),m(Error("Illegal object.")));var b;b=pa(a);var c=Qb[b];if(c){var d=ja(cd),e=ja(n);d&&e?(c=Pb[cd],b=!!c&&!!c[n]&&b in c[n]):b=!d&&!e?q:Gb(c,function(a){return d&&a.type==cd||e&&a.capture==n})}else b=s;b||P(a,cd,this.Oh.bind(this))};
w.get=function(a){a==r&&m(Error("Invalid object id."));for(var b=this.Ya.t,c=b.length,d=0,d=0;d<c;d++)if(b[d].ea==a)return b[d];return r};
w.ec=function(){(!this.da||!this.a)&&m(Error("The renderer was not initialized properly."));if(this.vf==r){if(tc(this.G.lc)){if(this.D.PROGRESSBAR_ENABLED&&!this.pa&&(this.pa=new Wf(this.u,3)),this.he=this.hd=s,this.vf=Yf(function(){this.vf=r;this.ec()}.bind(this),100),!this.D.INTERMEDIATE_RENDERING)return}else if(!this.hd&&!this.he&&(this.he=q,eval("this.onShowtime()"),this.hd=q),this.pa){this.D.PROGRESSBAR_ENABLED&&(this.pa&&!this.df)&&(Xf(this.pa),this.df=Yf(function(){this.df=r;this.pa&&(this.pa.Gd(),
this.pa=r);this.ec()}.bind(this),700));return}this.cf=window.requestAnimationFrame(this.ec.bind(this),this.da);eval("this.onRender()");this.Lb(s,q)}};w.ig=ba();w.gg=ba();w.Lb=ba();
w.vd=function(){window.cancelAnimationFrame(this.cf);this.G&&(delete this.G,this.G=r);this.pa&&(this.pa.Gd(),delete this.pa,this.pa=r);this.Ya.clear();delete this.Ya;this.Ma.length=0;delete this.Ma;delete this.G;this.G=r;delete this.q;this.q=r;delete this.ja;this.ja=r;delete this.a;this.a=r;Gd(this.da);delete this.da;this.da=r};function $f(a,b,c,d,e,f,g,h){var j,k;if(j=c.offsetParent){var l="HTML"==j.tagName||"BODY"==j.tagName;if(!l||"static"!=Md(j,"position"))k=Rd(j),l||(l=(l=Sd(j))&&jb?-j.scrollLeft:l&&(!M||!xb("8"))&&"visible"!=Md(j,"overflowX")?j.scrollWidth-j.clientWidth-j.scrollLeft:j.scrollLeft,k=rd(k,new qd(l,j.scrollTop)))}j=k||new qd;k=Rd(a);l=Wd(a);k=new ud(k.x,k.y,l.width,l.height);(l=Qd(a))&&k.Uf(new ud(l.left,l.top,l.right-l.left,l.bottom-l.top));var l=zd(a),p=zd(c);if(l.O!=p.O){var u=l.O.body,p=p.O.parentWindow||
p.O.defaultView,v=new qd(0,0),x=Bd(u)?Bd(u).parentWindow||Bd(u).defaultView:window,z=u;do{var C=x==p?Rd(z):Td(z);v.x+=C.x;v.y+=C.y}while(x&&x!=p&&(z=x.frameElement)&&(x=x.parent));u=rd(v,Rd(u));M&&!Jd(l)&&(u=rd(u,Kd(l)));k.left+=u.x;k.top+=u.y}a=(b&4&&Sd(a)?b^2:b)&-5;b=new qd(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);b=rd(b,j);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var E;if(g&&(E=Qd(c)))E.top-=j.y,E.right-=j.x,E.bottom-=j.y,E.left-=j.x;return ag(b,c,d,f,E,g,h)}
function ag(a,b,c,d,e,f,g){a=a.h();var h=0,j=(c&4&&Sd(b)?c^2:c)&-5;c=Wd(b);g=g?g.h():c.h();if(d||0!=j)j&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),j&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&(h.x+g.width>e.right&&f&16)&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y<=e.top&&(h.y+g.height<e.bottom&&f&32)&&(g.height=Math.max(g.height-(e.top-h.y),0),h.y=0,d|=8);h.y>=e.top&&(h.y+g.height>e.bottom&&f&32)&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=jb&&($a||nb)&&xb("1.9");f instanceof
qd?(a=f.x,f=f.y):(a=f,f=n);b.style.left=Vd(a,e);b.style.top=Vd(f,e);if(!(c==g||(!c||!g?0:c.width==g.width&&c.height==g.height)))a=Jd(zd(Bd(b))),M&&(!a||!xb("8"))?(c=b.style,a?(M?(a=$d(b,"paddingLeft"),e=$d(b,"paddingRight"),f=$d(b,"paddingTop"),d=$d(b,"paddingBottom"),a=new sd(f,e,d,a)):(a=Ld(b,"paddingLeft"),e=Ld(b,"paddingRight"),f=Ld(b,"paddingTop"),d=Ld(b,"paddingBottom"),a=new sd(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),M?(e=be(b,"borderLeft"),f=be(b,"borderRight"),d=be(b,"borderTop"),
b=be(b,"borderBottom"),b=new sd(d,f,b,e)):(e=Ld(b,"borderLeftWidth"),f=Ld(b,"borderRightWidth"),d=Ld(b,"borderTopWidth"),b=Ld(b,"borderBottomWidth"),b=new sd(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,jb?b.MozBoxSizing="border-box":kb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",
b.height=Math.max(g.height,0)+"px");return h};function bg(){}bg.prototype.Ra=ba();function cg(a,b,c){this.element=a;this.Gf=b;this.li=c}G(cg,bg);cg.prototype.Ra=function(a,b,c){$f(this.element,this.Gf,a,b,n,c,this.li)};function dg(a,b){bc.call(this);this.mb=new Kf(this);this.Se(a||r);b&&(this.yc=b)}G(dg,bc);w=dg.prototype;w.s=r;w.Ng=q;w.Af=r;w.ra=s;w.Ei=s;w.Ee=-1;w.Xf=-1;w.th=s;w.bh=q;w.yc="toggle_display";w.m=t("s");w.Se=function(a){this.ra&&m(Error("Can not change this state of the popup while showing."));this.s=a};
function eg(a,b){a.Ud&&a.Ud.stop();a.Fd&&a.Fd.stop();if(b){if(!a.ra&&a.Ke()){a.s||m(Error("Caller must call setElement before trying to show the popup"));a.Ra();var c=Bd(a.s);a.th&&Mf(a.mb,c,"keydown",a.Mh,q);if(a.Ng)if(Mf(a.mb,c,"mousedown",a.eg,q),M){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}Mf(a.mb,c,"mousedown",a.eg,q);Mf(a.mb,c,"deactivate",a.dg)}else Mf(a.mb,c,"blur",a.dg);"toggle_display"==
a.yc?(a.s.style.visibility="visible",Yd(a.s,q)):"move_offscreen"==a.yc&&a.Ra();a.ra=q;a.Ud?(Ub(a.Ud,"end",a.hg,s,a),a.Ud.play()):a.hg()}}else fg(a)}w.Ra=ga;function fg(a,b){if(!a.ra||!a.dispatchEvent({type:"beforehide",target:b}))return s;a.mb&&a.mb.Re();a.ra=s;a.Xf=xa();a.Fd?(Ub(a.Fd,"end",wa(a.Ff,b),s,a),a.Fd.play()):a.Ff(b);return q}w.Ff=function(a){"toggle_display"==this.yc?this.Ei?Yf(this.Pf,0,this):this.Pf():"move_offscreen"==this.yc&&(this.s.style.top="-10000px");this.Le(a)};
w.Pf=function(){this.s.style.visibility="hidden";Yd(this.s,s)};w.Ke=function(){return this.dispatchEvent("beforeshow")};w.hg=function(){this.Ee=xa();this.Xf=-1;this.dispatchEvent("show")};w.Le=function(a){this.dispatchEvent({type:"hide",target:a})};w.eg=function(a){a=a.target;!Id(this.s,a)&&((!this.Af||Id(this.Af,a))&&!(150>xa()-this.Ee))&&fg(this,a)};w.Mh=function(a){27==a.keyCode&&fg(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
w.dg=function(a){if(this.bh){var b=Bd(this.s);if(M||ib){if(a=b.activeElement,!a||Id(this.s,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.Ee||fg(this)}};function gg(a,b){this.xe=a instanceof qd?a:new qd(a,b)}G(gg,bg);gg.prototype.Ra=function(a,b,c,d){$f(Nd(a),0,a,b,this.xe,c,r,d)};function hg(a,b){this.oi=4;this.Ld=b||n;dg.call(this,a)}G(hg,dg);hg.prototype.Ra=function(){if(this.Ld){var a=!this.ra&&"move_offscreen"!=this.yc,b=this.m();a&&(b.style.visibility="hidden",Yd(b,q));this.Ld.Ra(b,this.oi,this.Yj);a&&Yd(b,s)}};function ig(a){this.L=new rc;a&&this.pe(a)}function jg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}w=ig.prototype;w.Ad=function(){return this.L.Ad()};w.add=function(a){this.L.set(jg(a),a)};w.pe=function(a){a=qc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};w.Re=function(a){a=qc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};w.remove=function(a){return this.L.remove(jg(a))};w.clear=function(){this.L.clear()};
w.contains=function(a){a=jg(a);return uc(this.L.L,a)};w.Uf=function(a){var b=new ig;a=qc(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};w.lb=function(){return this.L.lb()};w.h=function(){return new ig(this)};function kg(a,b,c){this.Ib=c||(a?zd(Cd(a)):zd());hg.call(this,this.Ib.tc("div",{style:"position:absolute;display:none;"}));this.ye=new qd(1,1);this.wd=new ig;a&&lg(this,a);if(b!=r)if(a=this.m(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Bd(a).createTextNode(String(b)))}}G(kg,hg);var mg=[];w=kg.prototype;w.ya=r;w.className="goog-tooltip";
w.pg=500;w.sh=0;w.Bd=t("Ib");function lg(a,b){b=Cd(b);a.wd.add(b);P(b,"mouseover",a.rh,s,a);P(b,"mouseout",a.Mf,s,a);P(b,"mousemove",a.qh,s,a);P(b,"focus",a.ph,s,a);P(b,"blur",a.Mf,s,a)}w.Se=function(a){var b=this.m();b&&Gd(b);kg.r.Se.call(this,a);a&&(b=this.Ib.O.body,b.insertBefore(a,b.lastChild))};
w.Ke=function(){if(!dg.prototype.Ke.call(this))return s;if(this.anchor)for(var a,b=0;a=mg[b];b++)Id(a.m(),this.anchor)||eg(a,s);0<=Db(mg,this)||mg.push(this);a=this.m();a.className=this.className;ng(this);P(a,"mouseover",this.Of,s,this);P(a,"mouseout",this.Nf,s,this);og(this);return q};
w.Le=function(){Hb(mg,this);for(var a=this.m(),b,c=0;b=mg[c];c++)b.anchor&&Id(a,b.anchor)&&eg(b,s);this.lg&&pg(this.lg);Vb(a,"mouseover",this.Of,s,this);Vb(a,"mouseout",this.Nf,s,this);this.anchor=n;if(0==(this.pb?this.ra?4:1:this.wc?3:this.ra?2:0))this.Qd=s;dg.prototype.Le.call(this)};w.bg=function(a,b){this.anchor==a&&this.wd.contains(this.anchor)&&(this.Qd||!this.ak?(eg(this,s),this.ra||(this.anchor=a,this.Ld=b||qg(this,0)||n,this.ra&&this.Ra(),eg(this,q))):this.anchor=n);this.pb=n};
w.Hh=function(a){this.wc=n;a==this.anchor&&(this.ya==r||this.ya!=this.m()&&!this.wd.contains(this.ya))&&(!this.Cf||!this.Cf.ya)&&eg(this,s)};function rg(a,b){var c=Kd(a.Ib);a.ye.x=b.clientX+c.x;a.ye.y=b.clientY+c.y}w.rh=function(a){var b=sg(this,a.target);this.ya=b;ng(this);b!=this.anchor&&(this.anchor=b,this.pb||(this.pb=Yf(va(this.bg,this,b,n),this.pg)),tg(this),rg(this,a))};function sg(a,b){try{for(;b&&!a.wd.contains(b);)b=b.parentNode;return b}catch(c){return r}}
w.qh=function(a){rg(this,a);this.Qd=q};w.ph=function(a){this.ya=a=sg(this,a.target);this.Qd=q;if(this.anchor!=a){this.anchor=a;var b=qg(this,1);ng(this);this.pb||(this.pb=Yf(va(this.bg,this,a,b),this.pg));tg(this)}};function qg(a,b){if(0==b){var c=a.ye.h();return new ug(c)}return new vg(a.ya)}function tg(a){if(a.anchor)for(var b,c=0;b=mg[c];c++)Id(b.m(),a.anchor)&&(b.Cf=a,a.lg=b)}
w.Mf=function(a){var b=sg(this,a.target),c=sg(this,a.relatedTarget);b!=c&&(b==this.ya&&(this.ya=r),og(this),this.Qd=s,this.ra&&(!a.relatedTarget||!Id(this.m(),a.relatedTarget))?pg(this):this.anchor=n)};w.Of=function(){var a=this.m();this.ya!=a&&(ng(this),this.ya=a)};w.Nf=function(a){var b=this.m();if(this.ya==b&&(!a.relatedTarget||!Id(b,a.relatedTarget)))this.ya=r,pg(this)};function og(a){a.pb&&(fa.clearTimeout(a.pb),a.pb=n)}
function pg(a){if(2==(a.pb?a.ra?4:1:a.wc?3:a.ra?2:0))a.wc=Yf(va(a.Hh,a,a.anchor),a.sh)}function ng(a){a.wc&&(fa.clearTimeout(a.wc),a.wc=n)}function ug(a,b){gg.call(this,a,b)}G(ug,gg);ug.prototype.Ra=function(a,b,c){b=Nd(a);b=Qd(b);c=c?new sd(c.top+10,c.right,c.bottom,c.left+10):new sd(10,0,0,10);ag(this.xe,a,4,c,b,9)&496&&ag(this.xe,a,4,c,b,5)};function vg(a){cg.call(this,a,3)}G(vg,cg);
vg.prototype.Ra=function(a,b,c){var d=new qd(10,0);$f(this.element,this.Gf,a,b,d,c,9)&496&&$f(this.element,2,a,1,d,c,5)};function xg(a,b,c,d){a==r&&m(Error("No valid parent element."));(!D(b)||!D(c))&&m(Error("Invalid coordinates."));(d==r||!(d instanceof fe))&&m(Error("Invalid interactor."));kg.call(this);this.c="caption";this.oa=a;this.sd=b;this.td=c;this.ja=d;this.ib=r;this.Ob=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Ob=[a];Ub(d,fd,this.Gd.bind(this));this.Ce()}G(xg,kg);
xg.prototype.Ce=function(){if("static"==this.oa.style.position||""==this.oa.style.position)this.oa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Ed("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Ob[0]));a.appendChild(b);b.appendChild(c);this.ib=b;this.Ld=new gg(this.sd,this.td)||n;this.ra&&this.Ra();eg(this,q);lg(this,this.oa);this.m().classList.add("x-tooltip")};
xg.prototype.Gd=function(){eg(this,s);this.ib&&Gd(this.ib);this.m()&&Gd(this.m());this.ib=r};function yg(){Zf.call(this);this.c="renderer3D";this.Hc=this.Kc=this.Gc=this.Jc=this.Fc=this.Ic=this.je=this.ke=r;this.k=[0,0,0];this.uf=r;this.Wd=new rc;this.Oc=new rc;this.Gb=new rc;this.ld=new rc;this.ic=new rc;this.oc=new rc;this.rc=new rc;this.sc=new rc;this.D={PROGRESSBAR_ENABLED:q,PICKING_ENABLED:q,ORDERING_ENABLED:q,STATISTICS_ENABLED:s,INTERMEDIATE_RENDERING:s}}G(yg,Zf);yg.prototype.__defineGetter__("config",t("D"));w=yg.prototype;
w.xi=function(){this.Hc=this.Kc=this.Gc=this.Jc=this.Fc=this.Ic=r;this.k=[0,0,0]};w.Me=function(a){yg.r.Me.call(this,a);var b=a.sd;a=a.td;var c=this.mg(b,a);if(c=this.get(c))if(c=c.hc){var d=Td(this.u);(new xg(this.u,d.x+b+10,d.y+a+10,this.ja)).m().innerHTML=c}};
w.ha=function(){yg.r.ha.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.H,this.B),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.D.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.H,this.B,0,this.a.RGB,this.a.UNSIGNED_BYTE,r);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,
b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.H,this.B);this.a.bindRenderbuffer(this.a.RENDERBUFFER,r);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.uf=a}}catch(d){m(Error("Exception while accessing GL Context!\n"+d))}a=new ye;(this.da==r||this.a==r||this.q==r)&&m(Error("Renderer was not initialized properly."));
(a==r||!(a instanceof ye))&&m(Error("Could not add shaders."));b=Object.keys(Ae);Object.keys(ze).every(function(a){a=ze[a];return-1!=this.qd.search(a)||-1!=this.ed.search(a)}.bind(a))||m(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=Ae[a];return-1!=this.qd.search(a)||-1!=this.ed.search(a)}.bind(a))||m(Error("Could not find all uniforms in the shader sources."));b=this.a.createShader(this.a.FRAGMENT_SHADER);c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,
a.ed);this.a.shaderSource(c,a.qd);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||m(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||m(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var e=this.a.createProgram();this.a.attachShader(e,c);this.a.attachShader(e,b);this.a.linkProgram(e);this.a.getProgramParameter(e,this.a.LINK_STATUS)||m(Error("Could not create shader program!\n"+
this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(e)));this.a.useProgram(e);this.je=e;Object.keys(ze).forEach(function(a){a=ze[a];this.Wd.set(a,this.a.getAttribLocation(this.je,a));this.a.enableVertexAttribArray(this.Wd.get(a))}.bind(this));Object.keys(Ae).forEach(function(a){a=Ae[a];this.Oc.set(a,this.a.getUniformLocation(this.je,a))}.bind(this));this.ke=a};
w.bb=function(a){yg.r.bb.call(this,a);var b=s;this.get(a.ea)&&(b=q);var c=a.ea,d=a.i,e=a.j,f=a.Z,g=a.z,h=a.o,j=a.Yb,k=a.Q,l=a.l,p=a.v;if(l!=r&&l.o!=r&&l.o.f)this.bb(l);else if(l!=r&&l.f&&this.bb(l),k!=r&&k.o!=r&&k.o.f)this.G.load(k,a);else if(g!=r&&g.o!=r&&g.o.f)this.G.load(g,a);else{if(h!=r&&y(h))if(a.fc!=r){if(a.fc.Id!=h.length||!a.f)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.G.load(h[b],a);return}else{if(h!=r&&h.f){this.G.load(a,a);return}if(p!=r&&p.o!=r&&p.o.f){this.G.load(p,a);return}}if(0<
a.e.length){h=a.e;k=h.length;for(l=l=0;l<k;l++)this.bb(h[l])}if(d){for(h=0;this.jd;)h++,window.console.log("Possible thread lock avoided: "+h);this.jd=q;k=a instanceof Be&&a.jb instanceof De;b&&(g!=r&&g.f)&&(h=this.rc.get(c),h!=r&&this.a.isBuffer(h.w)&&this.a.deleteBuffer(h.w));h=r;g!=r&&(!b||g.f?(h=a.Fb,h==r&&m(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),l=s,g.xa&&(l=q),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,l),l=this.a.createTexture(),
l.vh=g.sb,this.sc.set(g.ea,l),this.a.bindTexture(this.a.TEXTURE_2D,l),g.xa?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.Db,g.Cb,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.xa):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,l.vh),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),
this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,r),l=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,l),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new pd(l,h.length,2),g.f=s):h=this.rc.get(c));yf(this.G,0.1);if(k)this.jd=
s,L.ta(this.c+".update"),yf(this.G,0.9);else{if(!b||d.f||j.f){k=j.ka;g=L.d.Qa(k,d.Tb,d.Ub,d.Vb);k=L.d.Qa(k,d.Qb,d.Rb,d.Sb);if(this.Ic===r||g.x<this.Ic)this.Ic=g.x;if(this.Fc===r||k.x>this.Fc)this.Fc=k.x;if(this.Jc===r||g.y<this.Jc)this.Jc=g.y;if(this.Gc===r||k.y>this.Gc)this.Gc=k.y;if(this.Kc===r||g.b<this.Kc)this.Kc=g.b;if(this.Hc===r||k.b>this.Hc)this.Hc=k.b;this.k=[(this.Ic+this.Fc)/2,(this.Jc+this.Gc)/2,(this.Kc+this.Hc)/2];j.f=s}b&&d.f&&(j=this.Gb.get(c),j!=r&&this.a.isBuffer(j.w)&&this.a.deleteBuffer(j.w));
j=r;!b||d.f?(j=this.a.createBuffer(),d.ob(),this.a.bindBuffer(this.a.ARRAY_BUFFER,j),this.a.bufferData(this.a.ARRAY_BUFFER,d.N,this.a.STATIC_DRAW),j=new pd(j,d.count,3),d.f=s):j=this.Gb.get(c);yf(this.G,0.3);b&&e.f&&(g=this.Gb.get(c),g!=r&&this.a.isBuffer(g.w)&&this.a.deleteBuffer(g.w));g=r;!b||e.f?(g=this.a.createBuffer(),e.ob(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,e.N,this.a.STATIC_DRAW),g=new pd(g,e.count,3),e.f=s):g=this.ld.get(c);yf(this.G,0.3);b&&(f&&
f.f)&&(e=this.ic.get(c),e!=r&&this.a.isBuffer(e.w)&&this.a.deleteBuffer(e.w));e=r;f&&(!b||f.f?(f.length!=d.length&&m(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),f.ob(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f.N,this.a.STATIC_DRAW),e=new pd(e,f.count,3),f.f=s):e=this.ic.get(c));yf(this.G,0.2);b&&(p&&p.f)&&(f=this.oc.get(c),f!=r&&this.a.isBuffer(f.w)&&this.a.deleteBuffer(f.w));f=r;p&&(f=p.zc,!b||p.f?(f.length!=d.length&&m(Error("Mismatch between points and scalars.")),
d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new pd(d,f.length,3),p.f=s):f=this.oc.get(c));yf(this.G,0.1);b||this.Ya.add(a);this.Gb.set(c,j);this.ld.set(c,g);this.ic.set(c,e);this.rc.set(c,h);this.oc.set(c,f);this.jd=a.f=s}}else a.f=s}};function zg(a,b){var c=b.i.cd,c=L.d.Qa(b.Yb.ka,c[0],c[1],c[2]),c=L.d.Qa(a.q.p,c.x,c.y,c.b),c=L.g.kb(a.q.wa,c);return Math.round(1E3*c)/1E3}
w.mg=function(a,b){if(this.D.PICKING_ENABLED){this.Lb(q,s);var c=new Uint8Array(4);this.a.readPixels(a,this.B-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
w.Lb=function(a,b){yg.r.Lb.call(this,a,b);this.a.viewport(0,0,this.H,this.B);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var c=this.Ya.t,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.uf):this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);var e=this.q.tf,f=this.q.p;this.a.uniformMatrix4fv(this.Oc.get("perspective"),s,e);this.a.uniformMatrix4fv(this.Oc.get("view"),s,f);e=this.k;this.a.uniform3f(this.Oc.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.Ma.length;for(e=0;e<f;++e){var g=this.Ma[e];if(g instanceof R){var h=L.d.Qa(this.q.p,1,0,0),j=L.g.kb(this.q.wa,h),h=L.d.Qa(this.q.p,-1,0,0),k=L.g.kb(this.q.wa,h),h=L.d.Qa(this.q.p,0,1,0),l=L.g.kb(this.q.wa,h),h=L.d.Qa(this.q.p,0,-1,0),p=L.g.kb(this.q.wa,h),h=L.d.Qa(this.q.p,0,0,1),u=L.g.kb(this.q.wa,h),h=L.d.Qa(this.q.p,0,0,-1),h=L.g.kb(this.q.wa,h),v=Math.max(j,l,u,k,p,h);v==j||v==k?Ce(g,0):v==l||v==p?Ce(g,1):(v==u||v==h)&&Ce(g,2)}}if(this.D.ORDERING_ENABLED){j=s;f=this.Ma;g=f.length-1;do if(e=
f[g],e instanceof R&&e.Na){k=e.Hb;j=e.T.e;1==k?j=e.U.e:2==k&&(j=e.hb.e);k=j.length;l=j[0];l.M=zg(this,l);l.ba=e.ba;p=j[k-1];p.M=zg(this,p);p.ba=e.ba;p=Math.round(1E3*((p.M-l.M)/k))/1E3;for(u=u=1;u<k-1;u++)h=Math.round(1E3*(l.M+u*p))/1E3,j[u].M=h,j[u].ba=e.ba;j=q}while(g--);f=this.Ya.t;g=f.length-1;do if(e=f[g],e.qa&&!(1==e.ba||e instanceof Be))e.M=zg(this,e),j=q;while(g--);j&&this.Ya.sort()}if(f=!a&&b!=r&&b&&this.D.STATISTICS_ENABLED)var x=0,z=0,C=0,E=0;var e=this.Wd,g=e.get("vertexPosition"),j=e.get("vertexNormal"),
k=e.get("vertexColor"),l=e.get("vertexTexturePos"),p=e.get("vertexScalar"),e=this.Oc,u=e.get("usePicking"),h=e.get("useObjectColor"),v=e.get("objectColor"),A=e.get("useScalars"),B=e.get("scalarsReplaceMode"),H=e.get("scalarsMin"),I=e.get("scalarsMax"),N=e.get("scalarsMinColor"),J=e.get("scalarsMaxColor"),K=e.get("scalarsInterpolation"),O=e.get("scalarsMinThreshold"),aa=e.get("scalarsMaxThreshold"),ca=e.get("objectOpacity"),W=e.get("labelmapOpacity"),da=e.get("labelmapColor"),V=e.get("useTexture"),
ab=e.get("useLabelMapTexture"),ka=e.get("textureSampler"),Dg=e.get("textureSampler2"),Eg=e.get("volumeLowerThreshold"),Fg=e.get("volumeUpperThreshold"),Gg=e.get("volumeScalarMin"),Hg=e.get("volumeScalarMax"),Ig=e.get("volumeWindowLow"),Jg=e.get("volumeWindowHigh"),Kg=e.get("volumeScalarMinColor"),Lg=e.get("volumeScalarMaxColor"),Qf=e.get("volumeTexture"),Mg=e.get("objectTransform"),Ng=e.get("pointSize"),e=d;do{var Z=c[d-e];if(Z){var ha=r;Z instanceof Be&&Z.jb&&(ha=Z.jb);if(Z.qa&&(!ha||ha.qa)&&(!a||
Z.Lc)){var ua=Z.ea,Wa=Z.Ec,Fa=this.Gb.get(ua),fb=this.ld.get(ua),se=this.ic.get(ua),wb=this.oc.get(ua),te=this.rc.get(ua);this.a.bindBuffer(this.a.ARRAY_BUFFER,Fa.w);this.a.vertexAttribPointer(g,Fa.ub,this.a.FLOAT,s,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,fb.w);this.a.vertexAttribPointer(j,fb.ub,this.a.FLOAT,s,0,0);a?this.a.uniform1i(u,q):this.a.uniform1i(u,s);se&&!a&&!Wa?(this.a.uniform1i(h,s),this.a.bindBuffer(this.a.ARRAY_BUFFER,se.w),this.a.vertexAttribPointer(k,se.ub,this.a.FLOAT,s,0,0)):
(fb=1,Wa&&!a&&(fb=0),this.a.uniform1i(h,fb),fb=Z.Nb,a&&(fb=[Math.floor(ua%65025%255)/255,Math.floor(ua%65025/255)/255,Math.floor(ua/65025)/255]),this.a.uniform3f(v,parseFloat(fb[0]),parseFloat(fb[1]),parseFloat(fb[2])),this.a.vertexAttribPointer(k,Fa.ub,this.a.FLOAT,s,0,0));wb&&!a&&!Wa?(this.a.uniform1i(A,q),this.a.uniform1i(B,Z.v.wf),ua=Z.v.xb,Wa=Z.v.vb,this.a.uniform3f(N,parseFloat(ua[0]),parseFloat(ua[1]),parseFloat(ua[2])),this.a.uniform3f(J,parseFloat(Wa[0]),parseFloat(Wa[1]),parseFloat(Wa[2])),
this.a.uniform1f(O,parseFloat(Z.v.S)),this.a.uniform1f(aa,parseFloat(Z.v.V)),this.a.uniform1f(H,parseFloat(Z.v.Ka)),this.a.uniform1f(I,parseFloat(Z.v.Ha)),this.a.uniform1i(K,parseInt(Z.v.Zd,10)),this.a.bindBuffer(this.a.ARRAY_BUFFER,wb.w),this.a.vertexAttribPointer(p,wb.ub,this.a.FLOAT,s,0,0)):(this.a.uniform1i(A,s),this.a.vertexAttribPointer(p,Fa.ub,this.a.FLOAT,s,0,0));this.a.uniform1f(ca,parseFloat(Z.ba));Z.z&&te&&!a?(this.a.uniform1i(V,q),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,
this.sc.get(Z.z.ea)),this.a.uniform1i(ka,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,te.w),this.a.vertexAttribPointer(l,te.ub,this.a.FLOAT,s,0,0),this.a.uniform1i(Qf,s)):(this.a.uniform1i(V,s),this.a.vertexAttribPointer(l,Fa.ub,this.a.FLOAT,s,0,0));ha&&(this.a.uniform1i(Qf,q),this.a.uniform1f(Eg,ha.S),this.a.uniform1f(Fg,ha.V),this.a.uniform1f(Gg,ha.Ka),this.a.uniform1f(Hg,ha.Ha),ua=ha.xb,Wa=ha.vb,this.a.uniform3f(Kg,parseFloat(ua[0]),parseFloat(ua[1]),parseFloat(ua[2])),this.a.uniform3f(Lg,parseFloat(Wa[0]),
parseFloat(Wa[1]),parseFloat(Wa[2])),this.a.uniform1f(Ig,ha.X),this.a.uniform1f(Jg,ha.W),wb=ha.l,this.a.uniform1i(ab,s),ha.Na?this.a.uniform1f(ca,parseFloat(ha.ba)):wb&&wb.qa&&(ha=Z.l.ea,this.a.uniform1i(ab,q),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.sc.get(ha)),this.a.uniform1i(Dg,1),this.a.uniform1f(W,wb.ba),this.a.uniform4fv(da,wb.le)));this.a.uniformMatrix4fv(Mg,s,Z.Yb.ka);ha=1;"POINTS"==Z.la&&(ha=Z.Mc);this.a.uniform1f(Ng,ha);ha=-1;Z.la==Oc?(ha=this.a.TRIANGLES,
f&&(z+=Fa.tb/3)):"LINES"==Z.la?(this.a.lineWidth(Z.mc),ha=this.a.LINES,f&&(C+=Fa.tb/2)):"POINTS"==Z.la?(ha=this.a.POINTS,f&&(E+=Fa.tb)):"TRIANGLE_STRIPS"==Z.la?(ha=this.a.TRIANGLE_STRIP,f&&(z+=Fa.tb/3)):"POLYGONS"==Z.la&&(ha=0==Fa.tb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(z+=Fa.tb/3));f&&(x+=Fa.tb);this.a.drawArrays(ha,0,Fa.tb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+x+" | "),c+="Triangles: "+Math.round(z)+" | ",c+="Lines: "+C+" | ",c+="Points: "+E+" | ",c+="Textures: "+this.sc.Ad(),
window.console.log(c))}};
w.remove=function(a){yg.r.remove.call(this,a);if(0<a.e.length)for(var b=a.e,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.ea;if(this.get(b)){c=this.rc.get(b);c!=r&&this.a.isBuffer(c.w)&&this.a.deleteBuffer(c.w);if(a.bk&&(c=this.sc.get(a.z.ea)))this.a.deleteTexture(c),this.sc.remove(a.z.ea);c=this.Gb.get(b);c!=r&&this.a.isBuffer(c.w)&&this.a.deleteBuffer(c.w);c=this.Gb.get(b);c!=r&&this.a.isBuffer(c.w)&&this.a.deleteBuffer(c.w);c=this.ic.get(b);c!=r&&this.a.isBuffer(c.w)&&this.a.deleteBuffer(c.w);
c=this.oc.get(b);c!=r&&this.a.isBuffer(c.w)&&this.a.deleteBuffer(c.w);this.Gb.remove(b);this.ld.remove(b);this.ic.remove(b);this.rc.remove(b);this.oc.remove(b);this.Ya.remove(a);return q}return s};w.vd=function(){this.ke=r;delete this.ke;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);yg.r.vd.call(this)};F("X.renderer3D",yg);F("X.renderer3D.prototype.init",yg.prototype.ha);F("X.renderer3D.prototype.add",yg.prototype.add);F("X.renderer3D.prototype.onShowtime",yg.prototype.ig);
F("X.renderer3D.prototype.onRender",yg.prototype.gg);F("X.renderer3D.prototype.get",yg.prototype.get);F("X.renderer3D.prototype.render",yg.prototype.ec);F("X.renderer3D.prototype.destroy",yg.prototype.vd);F("X.renderer3D.prototype.remove",yg.prototype.remove);F("X.renderer3D.prototype.resetBoundingBox",yg.prototype.xi);F("X.renderer3D.prototype.resetViewAndRender",yg.prototype.ad);F("X.renderer3D.prototype.pick",yg.prototype.mg);function Ag(){U.call(this);this.c="mesh";Ea(this,new pc)}G(Ag,U);F("X.mesh",Ag);function Bg(){U.call(this);this.c="fibers";Ea(this,new pc)}G(Bg,U);F("X.fibers",Bg);function Cg(){Zf.call(this);this.c="renderer2D";this.La=r;this.rf=["yellow","red","green"];this.yb=1;this.zb=2;this.kf=this.$d=this.hf=this.Yd=r;this.pc=this.qc=this.nd=this.od=0;this.W=this.X=this.V=this.S=this.ff=-1;this.lf=new Float32Array([-255,-255,-255,-255])}G(Cg,Zf);Cg.prototype.$h=ba();Cg.prototype.ii=ba();Cg.prototype.Oe=function(a){Cg.r.Oe.call(this,a);var b=this.Ma[0];if(b){var c=this.La;b["index"+c]=a.K?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};
Cg.prototype.ji=function(a){var b=this.Ma[0];if(b){var c=b.W-b.X,d=c/2,e=parseInt(c+c/15*-a.oe,10);a=parseInt(d+d/15*a.ee,10);c==e&&e++;d==a&&a++;b.X-=parseInt(d-a,10);b.X-=parseInt(c-e,10);b.X=Math.max(b.X,b.Ka);b.W-=parseInt(d-a,10);b.W+=parseInt(c-e,10);b.W=Math.min(b.W,b.Ha);eval("this.onWindowLevel();")}};Cg.prototype.__defineGetter__("orientation",t("La"));
Cg.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&("Y"!=a&&"Z"!=a)&&m(Error("Invalid orientation."));this.La=a});w=Cg.prototype;w.ha=function(){this.La||m(Error("No 2D orientation set."));Cg.r.ha.call(this,"2d");"X"==this.La?(this.yb=1,this.zb=2):"Y"==this.La?(this.yb=0,this.zb=2):"Z"==this.La&&(this.yb=0,this.zb=1);this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.da.width,this.da.height);this.Yd=Ed("canvas");this.$d=Ed("canvas");P(this.q,bd,this.ji.bind(this))};
w.rotate=function(){this.q.p[1]++};w.zi=function(){this.q.p[1]--};w.Ne=function(){Cg.r.Ne.call(this);Og(this)};w.ad=function(){Cg.r.ad.call(this);Og(this);var a=this.Ma[0];a&&(a.W=a.Ha,a.X=a.Ka)};
w.bb=function(a){Cg.r.bb.call(this,a);var b=s;this.get(a.ea)&&(b=q);if(a instanceof R){var c=a.o,d=a.l,e=a.Q;if(d!=r&&d.o!=r&&d.o.f)this.bb(d);else if(e!=r&&e.o!=r&&e.o.f)this.G.load(e,a);else{if(c!=r&&y(c))if(a.fc!=r){if(a.fc.Id!=c.length||b&&!a.f)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.G.load(c[b],a);return}else if(c!=r&&c.f){this.G.load(a,a);return}d=c=0;d=a.R;e=a.J;c=d[this.yb];d=d[this.zb];this.qc=e[this.yb];this.pc=e[this.zb];"X"==this.La?this.Xb=a.T.e:"Y"==this.La?this.Xb=a.U.e:"Z"==
this.La&&(this.Xb=a.hb.e);this.od=c;this.nd=d;e=this.Yd;e.width=c;e.height=d;var f=this.$d;f.width=c;f.height=d;this.hf=e.getContext("2d");this.kf=f.getContext("2d");b||(this.Ya.add(a),Og(this))}}};function Og(a){var b=Math.min(a.H/(a.od*a.qc),a.B/(a.nd*a.pc));a.q.p[14]=b}
w.tg=function(a,b){var c=this.Ma[0],d=this.q.p,e=1*d[12],f=-1*d[13],d=Math.max(d[14],0.6),g=[this.H/2,this.B/2],h=this.od*this.qc*d,j=this.nd*this.pc*d,k=g[0]-h/2,g=g[1]-j/2,l=0,p=0,u=[Math.floor(c.Ua),Math.floor(c.Va),Math.floor(c.Wa)],v=c.R[this.yb],c=c.R[this.zb],l=Math.floor(v-(a-(k+e*d))/h*v),p=Math.floor(c-(b-(g+f*d))/j*c);if(0>l||l>=v||0>p||p>=c)return r;u[this.yb]=l;u[this.zb]=p;return u};
w.Lb=function(a,b){Cg.r.Lb.call(this,a,b);if(0!=this.Ya.t.length){var c=this.H,d=this.B,e=this.q.p;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e[12],g=-1*e[13],h=Math.max(e[14],0.6);this.a.setTransform(h,0,0,h,0,0);var j=this.Ma[0],k=r;j.l&&(k=j.l.le);var l=j["index"+this.La],p=this.Xb[parseInt(l,10)],u=p.z.xa,p=p.l,v=r;p&&(v=p.xa);var x=this.od,z=this.nd,C=this.hf,E=this.kf,A=C.getImageData(0,0,x,z),B=E.getImageData(0,0,x,z),H=A.data,I=B.data,N=H.length,J=j.Ha,K=j.S,O=
j.V,aa=j.X/J,ca=j.W/J;if(this.ff!=l||this.S!=K||this.V!=O||this.X!=aa||this.W!=ca||k&&!If(k,this.lf,0)){var W=0;do{var da=[0,0,0,0],V=[0,0,0,0],ab=u[W]/255*J,ka=u[W],ka=(ka/255-aa)/(ca-aa),ka=255*ka;ab>=K&&ab<=O&&(da=new S(j.xb[0],j.xb[1],j.xb[2]),da=(new S(j.vb[0],j.vb[1],j.vb[2])).scale(ka).add(da.scale(255-ka)),da=[Math.floor(da.x),Math.floor(da.y),Math.floor(da.b),255],p&&(-255==k[3]?V=[v[W],v[W+1],v[W+2],v[W+3]]:If(k,v,W)&&(V=[v[W],v[W+1],v[W+2],v[W+3]])));ka=N-1-W;H[ka-3]=da[0];H[ka-2]=da[1];
H[ka-1]=da[2];H[ka]=da[3];I[ka-3]=V[0];I[ka-2]=V[1];I[ka-1]=V[2];I[ka]=V[3];W+=4}while(W<N);C.putImageData(A,0,0);E.putImageData(B,0,0);this.ff=l;this.S=K;this.V=O;this.X=aa;this.W=ca;p&&(this.lf=k)}this.a.globalAlpha=1;this.a.translate(c/2/h,d/2/h);c=e[1];this.a.rotate(0.5*Math.PI*c);switch(c%4){case 1:c=f;f=g;g=-c;break;case 2:f*=-1;g*=-1;break;case 3:c=f,f=-g,g=c}f=-x*this.qc/2+f;g=-z*this.pc/2+g;this.a.drawImage(this.Yd,f,g,x*this.qc,z*this.pc);p&&j.l.qa&&(this.a.globalAlpha=j.l.ba,this.a.drawImage(this.$d,
f,g,x*this.qc,z*this.pc));if(this.D.SLICENAVIGATORS&&(this.ja.kd&&this.ja.xf&&!this.ja.Xa)&&(g=this.ja.gb,g=this.tg(g[0],g[1])))p=this.rf[this.yb],x=this.rf[this.zb],j.Ua=g[0],j.Va=g[1],j.Wa=g[2],j.n(s),this.a.setTransform(1,0,0,1,0,0),this.a.lineWidth=1,this.a.beginPath(),this.a.moveTo(this.ja.gb[0]+0.5,0),this.a.lineTo(this.ja.gb[0]+0.5,this.B),this.a.strokeStyle=p,this.a.stroke(),this.a.closePath(),this.a.beginPath(),this.a.moveTo(0,this.ja.gb[1]+0.5),this.a.lineTo(this.H,this.ja.gb[1]+0.5),this.a.strokeStyle=
x,this.a.stroke(),this.a.closePath()}};F("X.renderer2D",Cg);F("X.renderer2D.prototype.init",Cg.prototype.ha);F("X.renderer2D.prototype.add",Cg.prototype.add);F("X.renderer2D.prototype.onShowtime",Cg.prototype.ig);F("X.renderer2D.prototype.onRender",Cg.prototype.gg);F("X.renderer2D.prototype.onScroll",Cg.prototype.$h);F("X.renderer2D.prototype.onWindowLevel",Cg.prototype.ii);F("X.renderer2D.prototype.get",Cg.prototype.get);F("X.renderer2D.prototype.rotate",Cg.prototype.rotate);
F("X.renderer2D.prototype.rotateCounter",Cg.prototype.zi);F("X.renderer2D.prototype.resetViewAndRender",Cg.prototype.ad);F("X.renderer2D.prototype.xy2ijk",Cg.prototype.tg);F("X.renderer2D.prototype.render",Cg.prototype.ec);F("X.renderer2D.prototype.destroy",Cg.prototype.vd);
